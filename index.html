<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Deal Qualification Tool</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg-body: #f5f5f7;
      --bg-surface: #ffffff;
      --bg-subtle: #f9fafb;
      --border-subtle: #e5e7eb;
      --border-strong: #d1d5db;
      --text-main: #111827;
      --text-muted: #6b7280;
      --accent: #4f46e5;
      --accent-soft: rgba(79, 70, 229, 0.08);
      --danger: #dc2626;
      --radius-lg: 14px;
      --radius-md: 10px;
      --radius-sm: 6px;
      --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.10);
      --shadow-card: 0 10px 25px rgba(15, 23, 42, 0.06);
      --font-sans: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      margin: 0;
      padding: 0;
      font-family: var(--font-sans);
      background: radial-gradient(circle at top left, #f9fafb, #eef2ff);
      color: var(--text-main);
    }

    body {
      min-height: 100vh;
    }

    .app-shell {
      max-width: 1120px;
      margin: 24px auto 40px auto;
      padding: 0 16px;
    }

    .app-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      gap: 12px;
    }

    .app-title {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo-pill {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: linear-gradient(135deg, #111827, #4b5563);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #f9fafb;
      font-size: 16px;
      font-weight: 600;
      box-shadow: 0 10px 25px rgba(15, 23, 42, 0.35);
    }

    .app-title h1 {
      margin: 0;
      font-size: 20px;
      letter-spacing: -0.02em;
    }

    .app-title span {
      display: block;
      font-size: 12px;
      color: var(--text-muted);
    }

    .header-meta {
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .badge {
      border-radius: 999px;
      font-size: 11px;
      padding: 4px 10px;
      border: 1px solid rgba(17, 24, 39, 0.08);
      background: rgba(255, 255, 255, 0.8);
      color: var(--text-muted);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      backdrop-filter: blur(12px);
    }

    .badge-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.18);
    }

    .main-card {
      background: rgba(255, 255, 255, 0.96);
      border-radius: 20px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(148, 163, 184, 0.4);
      padding: 16px 16px 20px 16px;
      backdrop-filter: blur(18px);
    }

    .tabs {
      display: flex;
      gap: 4px;
      padding: 4px;
      border-radius: 999px;
      background: #f3f4f6;
      width: fit-content;
    }

    .tab-button {
      border-radius: 999px;
      border: none;
      padding: 6px 16px;
      font-size: 13px;
      background: transparent;
      color: var(--text-muted);
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: all 0.16s ease;
    }

    .tab-button span.icon {
      font-size: 14px;
    }

    .tab-button.active {
      background: #ffffff;
      color: var(--text-main);
      box-shadow: 0 4px 14px rgba(15, 23, 42, 0.13);
    }

    .tab-button:focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }

    .tab-bar-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      flex-wrap: wrap;
      gap: 8px;
    }

    .start-area {
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--text-muted);
      font-size: 13px;
    }

    .btn-primary,
    .btn-secondary,
    .btn-ghost,
    .btn-danger {
      border-radius: 999px;
      font-size: 13px;
      padding: 7px 14px;
      border: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: all 0.16s ease;
      white-space: nowrap;
    }

    .btn-primary {
      background: #111827;
      color: #f9fafb;
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.35);
    }

    .btn-primary:hover {
      background: #020617;
      transform: translateY(-1px);
      box-shadow: 0 12px 24px rgba(15, 23, 42, 0.4);
    }

    .btn-primary:disabled {
      opacity: 0.4;
      cursor: default;
      transform: none;
      box-shadow: none;
    }

    .btn-secondary {
      background: #e5e7eb;
      color: #111827;
    }

    .btn-secondary:hover {
      background: #d1d5db;
    }

    .btn-ghost {
      background: transparent;
      color: var(--text-muted);
      padding-inline: 8px;
    }

    .btn-danger {
      background: #fee2e2;
      color: #b91c1c;
    }

    .btn-danger:hover {
      background: #fecaca;
    }

    .content {
      margin-top: 8px;
    }

    .section {
      margin-bottom: 14px;
    }

    .section-card {
      background: var(--bg-subtle);
      border-radius: var(--radius-lg);
      padding: 14px 16px;
      border: 1px solid var(--border-subtle);
      box-shadow: var(--shadow-card);
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      gap: 8px;
    }

    .section-title {
      font-size: 14px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .section-subtitle {
      font-size: 12px;
      color: var(--text-muted);
    }

    .pill-muted {
      font-size: 11px;
      border-radius: 999px;
      padding: 2px 8px;
      background: rgba(15, 23, 42, 0.04);
      color: var(--text-muted);
    }

    .section-body {
      margin-top: 8px;
    }

    .form-field {
      margin-bottom: 8px;
    }

    .form-label {
      font-size: 12px;
      font-weight: 500;
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 4px;
      color: #374151;
    }

    .required-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: var(--danger);
    }

    input[type="text"],
    textarea,
    input[type="number"],
    select {
      width: 100%;
      border-radius: 10px;
      border: 1px solid var(--border-subtle);
      padding: 7px 9px;
      font-size: 13px;
      background: #ffffff;
      color: var(--text-main);
      transition: border-color 0.15s ease, box-shadow 0.15s ease,
        background-color 0.15s ease;
    }

    input[type="text"]:focus,
    textarea:focus,
    input[type="number"]:focus,
    select:focus {
      outline: none;
      border-color: #6366f1;
      box-shadow: 0 0 0 1px rgba(99, 102, 241, 0.3);
      background: #ffffff;
    }

    textarea {
      resize: vertical;
      min-height: 72px;
    }

    .form-footer {
      display: flex;
      justify-content: flex-end;
      margin-top: 6px;
    }

    .error-text {
      font-size: 11px;
      color: var(--danger);
      margin-top: 4px;
    }

    .deal-info-grid {
      display: grid;
      grid-template-columns: 1.2fr 2fr;
      gap: 12px;
      align-items: flex-start;
    }

    /* Tables */
    .grid-two {
      display: grid;
      grid-template-columns: minmax(0, 2fr) minmax(0, 1.1fr);
      gap: 12px;
    }

    .score-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
    }

    .score-table thead {
      background: #e5e7eb;
    }

    .score-table th,
    .score-table td {
      padding: 6px 8px;
      border-bottom: 1px solid #e5e7eb;
      text-align: left;
      vertical-align: middle;
    }

    .score-table th:first-child,
    .score-table td:first-child {
      border-left: 1px solid #e5e7eb;
    }

    .score-table th:last-child,
    .score-table td:last-child {
      border-right: 1px solid #e5e7eb;
    }

    .score-table th {
      font-weight: 500;
      color: #374151;
    }

    .score-table tbody tr:nth-child(even) {
      background: #f9fafb;
    }

    .score-table caption {
      text-align: left;
      font-size: 12px;
      margin-bottom: 6px;
      color: var(--text-muted);
    }

    .group-row {
      background: #f3f4f6 !important;
      font-weight: 600;
      font-size: 11px;
      color: #111827;
    }

    .info-icon {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      border: 1px solid #d1d5db;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      color: #6b7280;
      cursor: pointer;
      background: #ffffff;
      position: relative;
    }

    .tooltip {
      position: absolute;
      z-index: 30;
      top: 125%;
      left: 50%;
      transform: translateX(-50%);
      min-width: 220px;
      max-width: 260px;
      background: #111827;
      color: #f9fafb;
      border-radius: 10px;
      padding: 8px 10px;
      font-size: 11px;
      box-shadow: 0 12px 30px rgba(15, 23, 42, 0.5);
      display: none;
      text-align: left;
    }

    .tooltip.visible {
      display: block;
    }

    .tooltip-title {
      font-weight: 600;
      margin-bottom: 4px;
    }

    .tooltip-line {
      margin-bottom: 2px;
      color: #e5e7eb;
      text-align: left;
    }

    .tooltip-line span {
      font-weight: 500;
    }

    /* Weights */
    .weight-card {
      background: #f9fafb;
      border-radius: 12px;
      padding: 8px 10px;
      border: 1px dashed var(--border-subtle);
      font-size: 12px;
    }

    .weight-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 4px;
    }

    .weight-card-title {
      font-weight: 500;
      font-size: 12px;
    }

    .weight-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 4px;
    }

    .weight-row span {
      font-size: 12px;
      color: #374151;
    }

    .weight-controls {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .weight-btn {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      background: #ffffff;
      font-size: 12px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0;
    }

    .weight-btn:hover {
      background: #f3f4f6;
    }

    .weight-input {
      width: 64px;
      text-align: right;
      font-variant-numeric: tabular-nums;
    }

    .weight-sum {
      font-size: 11px;
      color: var(--text-muted);
      text-align: right;
      margin-top: 2px;
    }

    .weight-sum.error {
      color: var(--danger);
    }

    .helper-text {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 2px;
    }

    /* Results & summaries */
    .section-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 10px;
      gap: 8px;
      flex-wrap: wrap;
    }

    .result-summary {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 8px;
      margin-top: 8px;
    }

    .result-pill {
      background: #111827;
      color: #f9fafb;
      border-radius: 999px;
      padding: 6px 12px;
      font-size: 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
    }

    .result-label {
      font-size: 11px;
      color: #d1d5db;
    }

    .risk-card {
      margin-top: 8px;
      background: #111827;
      color: #f9fafb;
      border-radius: 14px;
      padding: 8px 10px;
      font-size: 12px;
    }

    .risk-card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 4px;
      gap: 6px;
    }

    .risk-card-title {
      font-weight: 500;
      font-size: 12px;
    }

    .risk-chip {
      font-size: 11px;
      border-radius: 999px;
      padding: 2px 8px;
      background: rgba(248, 250, 252, 0.08);
      color: #e5e7eb;
    }

    .risk-list {
      margin: 0;
      padding-left: 16px;
    }

    .risk-list li {
      margin-bottom: 2px;
    }

    /* Summary bar */
    .summary-bar {
      padding: 6px 10px;
      border-radius: 999px;
      background: #eef2ff;
      color: #111827;
      font-size: 12px;
      display: none;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
      margin-bottom: 6px;
    }

    .summary-bar span.label {
      font-weight: 500;
    }

    .summary-toggle-btn {
      border-radius: 999px;
      border: none;
      background: transparent;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: #4b5563;
      cursor: pointer;
      padding: 3px 8px;
    }

    .summary-toggle-btn:hover {
      background: rgba(15, 23, 42, 0.06);
    }

    .summary-bar small {
      color: #4b5563;
      font-size: 11px;
    }

    /* Modal */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.45);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 50;
    }

    .modal-backdrop.visible {
      display: flex;
    }

    .modal {
      background: #111827;
      color: #f9fafb;
      border-radius: 18px;
      padding: 14px 16px;
      width: min(380px, 90vw);
      box-shadow: 0 24px 60px rgba(0, 0, 0, 0.75);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
    }

    .modal-title {
      font-size: 14px;
      font-weight: 600;
    }

    .modal-body {
      font-size: 13px;
      color: #e5e7eb;
    }

    .modal-sub {
      font-size: 11px;
      color: #9ca3af;
      margin-top: 4px;
    }

    /* Dashboard */
    .dashboard-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1.1fr);
      gap: 12px;
    }

    .metrics-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 8px;
      margin-bottom: 8px;
    }

    .metric-card {
      background: #f9fafb;
      border-radius: 12px;
      padding: 8px 10px;
      border: 1px solid var(--border-subtle);
      font-size: 12px;
    }

    .metric-label {
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 2px;
    }

    .metric-value {
      font-size: 18px;
      font-weight: 600;
      letter-spacing: -0.02em;
    }

    .metric-sub {
      font-size: 11px;
      color: #4b5563;
      margin-top: 2px;
    }

    .quadrant-card {
      background: #f9fafb;
      border-radius: 14px;
      padding: 8px;
      border: 1px solid var(--border-subtle);
    }

    .quadrant-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 6px;
      font-size: 12px;
    }

    canvas#quadrantCanvas {
      width: 100%;
      max-width: 420px;
      height: 260px;
      border-radius: 12px;
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      display: block;
    }

    .summary-card {
      background: #111827;
      color: #f9fafb;
      border-radius: 14px;
      padding: 10px 12px;
      font-size: 12px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      min-height: 120px;
    }

    .summary-zone {
      font-weight: 600;
      font-size: 13px;
    }

    .summary-body {
      color: #e5e7eb;
    }

    .summary-actions {
      font-size: 11px;
      color: #cbd5f5;
    }

    /* Admin */
    .admin-list {
      margin-top: 8px;
      border-radius: 12px;
      border: 1px solid var(--border-subtle);
      overflow: hidden;
    }

    .admin-header-row {
      padding: 6px 10px;
      display: grid;
      grid-template-columns: minmax(0, 2fr) 1.1fr auto;
      gap: 8px;
      align-items: center;
      font-size: 11px;
      background: #f3f4f6;
      color: #4b5563;
      font-weight: 500;
    }

    .admin-row {
      padding: 8px 10px;
      display: grid;
      grid-template-columns: minmax(0, 2fr) 1.1fr auto;
      gap: 8px;
      align-items: center;
      font-size: 12px;
      background: #ffffff;
    }

    .admin-row:nth-child(even) {
      background: #f9fafb;
    }

    .admin-main {
      min-width: 0;
    }

    .admin-name {
      font-weight: 500;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .admin-desc {
      font-size: 11px;
      color: var(--text-muted);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      margin-top: 2px;
    }

    .admin-date {
      font-size: 11px;
      color: #4b5563;
    }

    .admin-actions {
      display: flex;
      gap: 6px;
      justify-content: flex-end;
    }

    .admin-empty {
      font-size: 12px;
      color: var(--text-muted);
      padding: 10px;
      text-align: center;
      background: #fafafa;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .main-card {
        padding: 12px 12px 16px 12px;
      }

      .tab-bar-row {
        flex-direction: column;
        align-items: flex-start;
      }

      .deal-info-grid {
        grid-template-columns: 1fr;
      }

      .grid-two {
        grid-template-columns: 1fr;
      }

      .dashboard-grid {
        grid-template-columns: 1fr;
      }

      canvas#quadrantCanvas {
        height: 220px;
      }

      .admin-header-row {
        display: none;
      }

      .admin-row {
        grid-template-columns: minmax(0, 1.5fr) 1.1fr;
        grid-template-rows: auto auto;
      }

      .admin-actions {
        grid-column: 1 / -1;
        justify-content: flex-start;
      }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <header class="app-header">
      <div class="app-title">
        <div class="logo-pill">DQ</div>
        <div>
          <h1>Deal Qualification Tool</h1>
          <span>Business Â· Technical Fit ê¸°ë°˜ Deal í‰ê°€</span>
        </div>
      </div>
      <div class="header-meta">
        <div class="badge">
          <span class="badge-dot"></span>
          Live Scoring
        </div>
        <div class="badge">
          <span>Local Storage</span> Â· <span>Single-page</span>
        </div>
      </div>
    </header>

    <main class="main-card">
      <div class="tab-bar-row">
        <div class="tabs" role="tablist">
          <button class="tab-button active" data-tab="qualification" role="tab" aria-selected="true">
            <span class="icon">ğŸ“Š</span>
            Deal Qualification
          </button>
          <button class="tab-button" data-tab="admin" role="tab" aria-selected="false">
            <span class="icon">ğŸ—‚ï¸</span>
            Admin
          </button>
        </div>
        <div class="start-area">
          <button class="btn-primary" id="startDealButton">
            â–¶ Create
          </button>
          <span>ìƒˆ Dealì„ ì…ë ¥í•˜ê³  ë‹¨ê³„ë³„ë¡œ í‰ê°€ë¥¼ ì§„í–‰í•˜ì„¸ìš”.</span>
        </div>
      </div>

      <div class="content">
        <!-- Deal Qualification Tab -->
        <section class="section" id="tab-qualification">
          <!-- Deal Info -->
          <div class="section-card" id="dealInfoSection" style="display:none;">
            <div class="section-header">
              <div>
                <div class="section-title">
                  <span>Deal ì •ë³´</span>
                  <span class="pill-muted">ê¸°ë³¸ ì •ë³´</span>
                </div>
                <div class="section-subtitle">
                  í‰ê°€ì— ì‚¬ìš©í•  Deal ì´ë¦„ê³¼ ê°„ë‹¨í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”.
                </div>
              </div>
            </div>
            <div class="section-body">
              <div class="deal-info-grid">
                <div>
                  <div class="form-field">
                    <div class="form-label">
                      Deal Name
                      <span class="required-dot"></span>
                    </div>
                    <input type="text" id="dealNameInput"
                      placeholder="ì˜ˆ: ABCì€í–‰ ì°¨ì„¸ëŒ€ ë°ì´í„° í”Œë«í¼" />
                    <div class="error-text" id="dealNameError" style="display:none;">
                      Deal Nameì€ í•„ìˆ˜ì…ë‹ˆë‹¤.
                    </div>
                  </div>
                  <div class="form-field">
                    <div class="form-label">
                      Deal Description
                      <span style="font-size:11px;color:var(--text-muted);">(ì„ íƒ)</span>
                    </div>
                    <textarea id="dealDescriptionInput"
                      placeholder="ê°„ë‹¨í•œ ë°°ê²½, ì£¼ìš” ì´í•´ê´€ê³„ì, ë²”ìœ„ ë“±ì„ ì ì–´ë‘ë©´ ì¢‹ìŠµë‹ˆë‹¤."></textarea>
                  </div>
                </div>
                <div>
                  <div class="helper-text">
                    ì´ ì •ë³´ëŠ” Dashboardì™€ Admin ë¦¬ìŠ¤íŠ¸ì—ì„œ Dealì„ ì‹ë³„í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.
                    <br />ì…ë ¥ í›„ <b>Start</b>ë¥¼ ëˆ„ë¥´ë©´ Deal Win Score í‰ê°€ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.
                  </div>
                </div>
              </div>
              <div class="form-footer">
                <button class="btn-secondary" id="dealInfoCompleteButton">
                  Start
                </button>
              </div>
            </div>
          </div>

          <!-- Collapsed Deal Win summary bar -->
          <div id="dealWinSummaryBar" class="summary-bar">
            <div>
              <span class="label">Deal Win Score</span>
              <small id="dealWinSummaryText">-</small>
            </div>
            <button class="summary-toggle-btn" data-target="dealWinSection">
              <span>í¼ì¹˜ê¸°/ì ‘ê¸°</span> â–¼
            </button>
          </div>

          <!-- Deal Win Score Section -->
          <div class="section-card" id="dealWinSection" style="display:none;">
            <div class="section-header">
              <div>
                <div class="section-title">
                  <span>Deal Win Score</span>
                  <span class="pill-muted">Business Fit</span>
                </div>
                <div class="section-subtitle">
                  Budget / Authority / Need / Timeline ê´€ì ì—ì„œ ìˆ˜ì£¼ ê°€ëŠ¥ì„±ì„ ì •ëŸ‰í™”í•©ë‹ˆë‹¤.
                </div>
              </div>
            </div>
            <div class="section-body" id="dealWinSectionBody">
              <div class="grid-two">
                <div>
                  <table class="score-table">
                    <caption>
                      ê° í•­ëª©ì— 1~5 ì ì„ ë¶€ì—¬í•˜ì„¸ìš”. (5ì ì´ ê°€ì¥ ìš°ìˆ˜)
                    </caption>
                    <thead>
                      <tr>
                        <th style="width:40%;">Deal í•­ëª©</th>
                        <th style="width:40%;">ì„¸ë¶€ í•­ëª©</th>
                        <th style="width:10%;">ì ìˆ˜</th>
                        <th style="width:10%;">i</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr class="group-row">
                        <td>Budget</td>
                        <td colspan="3">ì˜ˆì‚° ë° êµ¬ë§¤ ì¤€ë¹„ë„</td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ì˜ˆì‚° ë° êµ¬ë§¤ ì¤€ë¹„ë„</td>
                        <td>
                          <select data-dw-score="budgetReadiness">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td>
                          <div class="info-icon" data-tooltip-id="tt-budget-readiness">i
                            <div class="tooltip" id="tt-budget-readiness">
                              <div class="tooltip-title">Budget Â· ì˜ˆì‚° ë° êµ¬ë§¤ ì¤€ë¹„ë„</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì˜ˆì‚° í™•ì • / ìŠ¹ì¸ê¶Œì ë™ì˜ / êµ¬ë§¤ ì ˆì°¨ ëª…í™•</div>
                              <div class="tooltip-line"><span>4ì </span> Â· ì˜ˆì‚° ê±°ì˜ í™•ì •, ë‚´ë¶€ ìŠ¹ì¸ ì ˆì°¨ë§Œ ë‚¨ì€ ìƒíƒœ</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ì˜ˆì‚° ê°€ëŠ¥í•˜ë‚˜ ìŠ¹ì¸ í•„ìš” / ê°€ê²© ë¯¼ê° / ë¶ˆí™•ì‹¤</div>
                              <div class="tooltip-line"><span>2ì </span> Â· ì˜ˆì‚° í›„ë³´ ìˆ˜ì¤€ / ìš°ì„ ìˆœìœ„ ë‚®ìŒ / ì¶•ì†Œ ê°€ëŠ¥ì„± ìˆìŒ</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ì˜ˆì‚° ì—†ìŒ / ìŠ¹ì¸ ì˜ì‚¬ ì—†ìŒ</div>
                            </div>
                          </div>
                        </td>
                      </tr>

                      <tr class="group-row">
                        <td>Authority</td>
                        <td colspan="3">ë‚´ë¶€ ì§€ì§€ì íŒŒì›Œ &amp; ì˜ì‚¬ê²°ì •ê¶Œì ì ‘ê·¼ì„±</td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ë‚´ë¶€ ì§€ì§€ì íŒŒì›Œ</td>
                        <td>
                          <select data-dw-score="authorityChampion">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td>
                          <div class="info-icon" data-tooltip-id="tt-authority-champion">i
                            <div class="tooltip" id="tt-authority-champion">
                              <div class="tooltip-title">Authority Â· ë‚´ë¶€ ì§€ì§€ì íŒŒì›Œ</div>
                              <div class="tooltip-line"><span>5ì </span> Â· íŒŒì›Œ ì±”í”¼ì–¸ / ì ê·¹ì  ì§€ì§€ / ë‚´ë¶€ ì¶”ì§„ ê°•í•¨</div>
                              <div class="tooltip-line"><span>4ì </span> Â· ì¤‘ê°„ ê´€ë¦¬ìê¸‰ ì±”í”¼ì–¸ / ì˜í–¥ë ¥ ë†’ìŒ</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ì‹¤ë¬´ ë¦¬ë”ê¸‰ ì±”í”¼ì–¸ / ë‚´ë¶€ ë…¼ì˜ ì£¼ë„ ê°€ëŠ¥</div>
                              <div class="tooltip-line"><span>2ì </span> Â· ì±”í”¼ì–¸ í›„ë³´ ìˆìœ¼ë‚˜ ì˜í–¥ë ¥ ì•½í•¨</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ì±”í”¼ì–¸ ì—†ìŒ / ë‹¨ìˆœ ê´€ì‹¬ì</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ì˜ì‚¬ê²°ì •ê¶Œì ì ‘ê·¼ì„±</td>
                        <td>
                          <select data-dw-score="authorityAccess">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td>
                          <div class="info-icon" data-tooltip-id="tt-authority-access">i
                            <div class="tooltip" id="tt-authority-access">
                              <div class="tooltip-title">Authority Â· ì˜ì‚¬ê²°ì •ê¶Œì ì ‘ê·¼ì„±</div>
                              <div class="tooltip-line"><span>5ì </span> Â· EBì™€ ì§ì ‘ ëŒ€í™” / ë‹ˆì¦ˆÂ·ìš°ì„ ìˆœìœ„ í™•ì¸ë¨</div>
                              <div class="tooltip-line"><span>4ì </span> Â· ì˜í–¥ë ¥ ìˆëŠ” ê´€ë¦¬ì ì ‘ì´‰ / EB ê²½ë¡œ í™•ë³´</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ì˜ì‚¬ê²°ì • êµ¬ì¡° íŒŒì•… / EB ì ‘ì´‰ ê°€ëŠ¥ì„± ì¡´ì¬</div>
                              <div class="tooltip-line"><span>2ì </span> Â· EBëŠ” ì•Œì§€ë§Œ ì ‘ì´‰ ë¶ˆê°€ / ê°„ì ‘ ì •ë³´ë§Œ ìˆìŒ</div>
                              <div class="tooltip-line"><span>1ì </span> Â· EBê°€ ëˆ„êµ¬ì¸ì§€ ëª¨ë¦„ / ì ‘ê·¼ ë¶ˆê°€</div>
                            </div>
                          </div>
                        </td>
                      </tr>

                      <tr class="group-row">
                        <td>Need</td>
                        <td colspan="3">ë¬¸ì œ ì í•©ì„± &amp; ê²½ìŸ êµ¬ë„</td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ë¬¸ì œ ì í•©ì„±</td>
                        <td>
                          <select data-dw-score="needFit">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td>
                          <div class="info-icon" data-tooltip-id="tt-need-fit">i
                            <div class="tooltip" id="tt-need-fit">
                              <div class="tooltip-title">Need Â· ë¬¸ì œ ì í•©ì„±</div>
                              <div class="tooltip-line"><span>5ì </span> Â· í•µì‹¬ Pain / ìš°ë¦¬ ì†”ë£¨ì…˜ì´ ê°€ì¥ ì í•©</div>
                              <div class="tooltip-line"><span>4ì </span> Â· ì£¼ìš” Painì— ì í•© / ì¼ë¶€ ë³´ì™„ í•„ìš”</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ë¬¸ì œ ëª…í™• / ì†”ë£¨ì…˜ìœ¼ë¡œ í•´ê²° ê°€ëŠ¥</div>
                              <div class="tooltip-line"><span>2ì </span> Â· ë¬¸ì œëŠ” ìˆìœ¼ë‚˜ Fit ë‚®ìŒ / ê³ ê°ë„ í™•ì‹  ì—†ìŒ</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ë¬¸ì œ ëª¨í˜¸ / ì†”ë£¨ì…˜ê³¼ ì—°ê²° ì•½í•¨</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ê²½ìŸ êµ¬ë„</td>
                        <td>
                          <select data-dw-score="needCompetition">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td>
                          <div class="info-icon" data-tooltip-id="tt-need-competition">i
                            <div class="tooltip" id="tt-need-competition">
                              <div class="tooltip-title">Need Â· ê²½ìŸ êµ¬ë„</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì‚¬ì‹¤ìƒ ìš°ë¦¬ ì„ íƒ / PoC ì‹œ í™•ì • ìˆ˜ì¤€</div>
                              <div class="tooltip-line"><span>4ì </span> Â· ì—¬ëŸ¬ ë©´ì—ì„œ ìš°ë¦¬ê°€ ìš°ìœ„</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ë¹„ìŠ·ë¹„ìŠ· / ë¹„êµ ì´ˆê¸°</div>
                              <div class="tooltip-line"><span>2ì </span> Â· ê²½ìŸ ìš°ì„¸ / ìš°ë¦¬ ìª½ ì•½í•¨</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ê²½ìŸì‚¬ ìš°ìœ„ / ê³ ê° ì„ í˜¸ë„ ë‚®ìŒ</div>
                            </div>
                          </div>
                        </td>
                      </tr>

                      <tr class="group-row">
                        <td>Timeline</td>
                        <td colspan="3">ì‹œê¸‰ì„±/íƒ€ì´ë° &amp; ë„ì… ìš©ì´ì„±</td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ì‹œê¸‰ì„±/íƒ€ì´ë°</td>
                        <td>
                          <select data-dw-score="timelineUrgency">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td>
                          <div class="info-icon" data-tooltip-id="tt-timeline-urgency">i
                            <div class="tooltip" id="tt-timeline-urgency">
                              <div class="tooltip-title">Timeline Â· ì‹œê¸‰ì„±/íƒ€ì´ë°</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì¦‰ì‹œ í•„ìš” / ê³„ì•½Â·ê·œì œ ë“± ê¸´ê¸‰ ì‚¬ìœ </div>
                              <div class="tooltip-line"><span>4ì </span> Â· í”„ë¡œì íŠ¸ ì¼ì •ê³¼ ì—°ê²° / ì¡°ë§Œê°„ ê²°ì • í•„ìš”</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ë¶„ê¸° ë‚´ ê²€í†  í•„ìš” / ì¼ì • ì¼ë¶€ ì¡´ì¬</div>
                              <div class="tooltip-line"><span>2ì </span> Â· ê´€ì‹¬ì€ ìˆìœ¼ë‚˜ ì¼ì • ë¶ˆí™•ì‹¤</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ê¸‰í•˜ì§€ ì•ŠìŒ / ê³„íš ì—†ìŒ</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ë„ì… ìš©ì´ì„±</td>
                        <td>
                          <select data-dw-score="timelineEase">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td>
                          <div class="info-icon" data-tooltip-id="tt-timeline-ease">i
                            <div class="tooltip" id="tt-timeline-ease">
                              <div class="tooltip-title">Timeline Â· ë„ì… ìš©ì´ì„±</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥ / ë¦¬ìŠ¤í¬ ê±°ì˜ ì—†ìŒ</div>
                              <div class="tooltip-line"><span>4ì </span> Â· ë„ì… ì‰¬ì›€ / í†µí•© ê°„ë‹¨</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ì¼ë°˜ì  ë‚œì´ë„ / ë³´í†µ ìˆ˜ì¤€</div>
                              <div class="tooltip-line"><span>2ì </span> Â· ì¥ë²½ ìˆì§€ë§Œ ê°€ëŠ¥ / ë¦¬ìŠ¤í¬ ì¡´ì¬</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ê¸°ìˆ ì  ì¥ì•  í¼ / í†µí•© ì–´ë ¤ì›€</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div>
                  <div class="weight-card">
                    <div class="weight-card-header">
                      <div class="weight-card-title">ê°€ì¤‘ì¹˜ ì„¤ì •</div>
                      <span class="pill-muted">í•©ê³„ = 1.00</span>
                    </div>

                    <div class="weight-row">
                      <span>Budget</span>
                      <div class="weight-controls">
                        <button type="button" class="weight-btn"
                          data-target="dwWeightBudget" data-delta="-0.01">âˆ’</button>
                        <input type="number" step="0.01" class="weight-input"
                          id="dwWeightBudget" value="0.30" />
                        <button type="button" class="weight-btn"
                          data-target="dwWeightBudget" data-delta="0.01">+</button>
                      </div>
                    </div>

                    <div class="weight-row">
                      <span>Need</span>
                      <div class="weight-controls">
                        <button type="button" class="weight-btn"
                          data-target="dwWeightNeed" data-delta="-0.01">âˆ’</button>
                        <input type="number" step="0.01" class="weight-input"
                          id="dwWeightNeed" value="0.30" />
                        <button type="button" class="weight-btn"
                          data-target="dwWeightNeed" data-delta="0.01">+</button>
                      </div>
                    </div>

                    <div class="weight-row">
                      <span>Authority</span>
                      <div class="weight-controls">
                        <button type="button" class="weight-btn"
                          data-target="dwWeightAuthority" data-delta="-0.01">âˆ’</button>
                        <input type="number" step="0.01" class="weight-input"
                          id="dwWeightAuthority" value="0.25" />
                        <button type="button" class="weight-btn"
                          data-target="dwWeightAuthority" data-delta="0.01">+</button>
                      </div>
                    </div>

                    <div class="weight-row">
                      <span>Timeline</span>
                      <div class="weight-controls">
                        <button type="button" class="weight-btn"
                          data-target="dwWeightTimeline" data-delta="-0.01">âˆ’</button>
                        <input type="number" step="0.01" class="weight-input"
                          id="dwWeightTimeline" value="0.15" />
                        <button type="button" class="weight-btn"
                          data-target="dwWeightTimeline" data-delta="0.01">+</button>
                      </div>
                    </div>

                    <div id="dwWeightSumText" class="weight-sum">
                      í•©ê³„: 1.00
                    </div>
                    <div class="helper-text">
                      ê°€ì¤‘ì¹˜ì˜ í•©ì€ 100%(1)ì…ë‹ˆë‹¤. í•©ê³„ê°€ 1ì„ ë„˜ê±°ë‚˜ ëª¨ìë¼ë©´ ê²°ê³¼ ê³„ì‚°ì´ ë¹„í™œì„±í™”ë©ë‹ˆë‹¤.
                    </div>
                  </div>
                </div>
              </div>

              <div class="section-footer">
                <div class="helper-text">
                  ëª¨ë“  í•­ëª©ì˜ ì ìˆ˜ì™€ ê°€ì¤‘ì¹˜ë¥¼ ì„¤ì •í•œ ë’¤, ê²°ê³¼ ë³´ê¸°ë¥¼ ëˆŒëŸ¬ Deal Scoreì™€ Win Probabilityë¥¼ í™•ì¸í•˜ì„¸ìš”.
                </div>
                <div>
                  <button class="btn-secondary" id="dealWinResultButton">
                    ê²°ê³¼ ë³´ê¸°
                  </button>
                </div>
              </div>

              <div id="dealWinResultArea" style="display:none;">
                <div class="result-summary">
                  <div class="result-pill">
                    <div>
                      <div class="result-label">Deal Score</div>
                      <div id="dealScoreValue">-</div>
                    </div>
                    <div>
                      <div class="result-label">Win Probability</div>
                      <div id="winProbValue">-</div>
                    </div>
                  </div>
                </div>
                <div class="risk-card">
                  <div class="risk-card-header">
                    <div class="risk-card-title">Risk Summary</div>
                    <span class="risk-chip">í•©ì‚° ì ìˆ˜ 2 ì´í•˜ í•­ëª©</span>
                  </div>
                  <ul class="risk-list" id="dealWinRiskList"></ul>
                </div>
              </div>
            </div>
          </div>

          <!-- Collapsed Technical summary -->
          <div id="techFitSummaryBar" class="summary-bar">
            <div>
              <span class="label">Technical Fit Score</span>
              <small id="techFitSummaryText">-</small>
            </div>
            <button class="summary-toggle-btn" data-target="techFitSection">
              <span>í¼ì¹˜ê¸°/ì ‘ê¸°</span> â–¼
            </button>
          </div>

          <!-- Technical Fit Score Section -->
          <div class="section-card" id="techFitSection" style="display:none;">
            <div class="section-header">
              <div>
                <div class="section-title">
                  <span>Technical Fit Score</span>
                  <span class="pill-muted">Technical Risk</span>
                </div>
                <div class="section-subtitle">
                  ê¸°ëŠ¥, ì¸í”„ë¼, ê·œì œ/ë³´ì•ˆ, ì‹¤í–‰ ê°€ëŠ¥ì„± ê´€ì ì—ì„œ ê¸°ìˆ ì  ë¦¬ìŠ¤í¬ë¥¼ í‰ê°€í•©ë‹ˆë‹¤.
                </div>
              </div>
            </div>
            <div class="section-body" id="techFitSectionBody">
              <div class="grid-two">
                <div>
                  <table class="score-table">
                    <caption>
                      ê° ì í•©ì„± í•­ëª©ì— 1~5 ì ì„ ë¶€ì—¬í•˜ì„¸ìš”. (5ì ì´ ê°€ì¥ ì í•©)
                    </caption>
                    <thead>
                      <tr>
                        <th style="width:40%;">ì í•©ì„± í•­ëª©</th>
                        <th style="width:40%;">ì„¸ë¶€ í•­ëª©</th>
                        <th style="width:10%;">ì ìˆ˜</th>
                        <th style="width:10%;">i</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr class="group-row">
                        <td>Technical Fit</td>
                        <td colspan="3">ê¸°ëŠ¥ ì í•©ì„± / ì»¤ìŠ¤í„°ë§ˆì´ì§• / ë ˆê±°ì‹œ</td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ê¸°ëŠ¥ ì í•©ì„±</td>
                        <td>
                          <select data-tf-score="tfFunctional">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td>
                          <div class="info-icon" data-tooltip-id="tt-tf-functional">i
                            <div class="tooltip" id="tt-tf-functional">
                              <div class="tooltip-title">Technical Fit Â· ê¸°ëŠ¥ ì í•©ì„±</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ìš”êµ¬ì‚¬í•­ ì™„ì „ ì¼ì¹˜ / ìµœì  Fit</div>
                              <div class="tooltip-line"><span>4ì </span> Â· í•„ìˆ˜ ê¸°ëŠ¥ ì¶©ì¡± / ì˜µì…˜ë§Œ ì¡°ì • í•„ìš”</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ì£¼ìš” ê¸°ëŠ¥ ëŒ€ë¶€ë¶„ ì¶©ì¡± / ë³´í†µ ìˆ˜ì¤€</div>
                              <div class="tooltip-line"><span>2ì </span> Â· í•µì‹¬ ê¸°ëŠ¥ ì¼ë¶€ ë¶€ì¡± / ì»¤ìŠ¤í„°ë§ˆì´ì§• í•„ìˆ˜</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ìš”êµ¬ ê¸°ëŠ¥ ëŒ€ë¶€ë¶„ ë¶ˆì¼ì¹˜ / êµ¬í˜„ ì–´ë ¤ì›€</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ì»¤ìŠ¤í„°ë§ˆì´ì§• í•„ìš”ë„</td>
                        <td>
                          <select data-tf-score="tfCustomization">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td>
                          <div class="info-icon" data-tooltip-id="tt-tf-customization">i
                            <div class="tooltip" id="tt-tf-customization">
                              <div class="tooltip-title">Technical Fit Â· ì»¤ìŠ¤í„°ë§ˆì´ì§• í•„ìš”ë„</div>
                              <div class="tooltip-line"><span>5ì </span> Â· êµ¬ì„±ë§Œìœ¼ë¡œ ì¦‰ì‹œ ì ìš© ê°€ëŠ¥</div>
                              <div class="tooltip-line"><span>4ì </span> Â· ì†Œê·œëª¨ êµ¬ì„± ì •ë„ / ë¶€ë‹´ ë‚®ìŒ</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ì¼ë°˜ì  ë‚œì´ë„ / êµ¬í˜„ ê°€ëŠ¥</div>
                              <div class="tooltip-line"><span>2ì </span> Â· ê°œë°œ í•„ìš”í•˜ë‚˜ ê°€ëŠ¥ / ë¦¬ìŠ¤í¬ ì¡´ì¬</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ì»¤ìŠ¤í„°ë§ˆì´ì§• ë§ìŒ / ë†’ì€ ë³µì¡ë„</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ë ˆê±°ì‹œ ì œì•½</td>
                        <td>
                          <select data-tf-score="tfLegacy">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td>
                          <div class="info-icon" data-tooltip-id="tt-tf-legacy">i
                            <div class="tooltip" id="tt-tf-legacy">
                              <div class="tooltip-title">Technical Fit Â· ë ˆê±°ì‹œ ì œì•½</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì œì•½ ê±°ì˜ ì—†ìŒ / ìµœì  í™˜ê²½</div>
                              <div class="tooltip-line"><span>4ì </span> Â· ì œì•½ ì ìŒ / ëŒ€ë¶€ë¶„ í˜¸í™˜</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ì¼ë¶€ ì œì•½ ìˆìœ¼ë‚˜ í˜„ì‹¤ì  ëŒ€ì•ˆ ì¡´ì¬</div>
                              <div class="tooltip-line"><span>2ì </span> Â· ì œì•½ ì¡´ì¬ / ìš°íšŒ ê°€ëŠ¥í•˜ë‚˜ ìœ„í—˜</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ë ˆê±°ì‹œ ì œì•½ ì‹¬ê° / ì—°ë™ ë¶ˆê°€</div>
                            </div>
                          </div>
                        </td>
                      </tr>

                      <tr class="group-row">
                        <td>Environment &amp; Integration</td>
                        <td colspan="3">ì¸í”„ë¼ / ì—°ë™ / ë„¤íŠ¸ì›Œí¬ ì œì•½</td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ì¸í”„ë¼ í˜¸í™˜ì„±</td>
                        <td>
                          <select data-tf-score="envInfra">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td>
                          <div class="info-icon" data-tooltip-id="tt-env-infra">i
                            <div class="tooltip" id="tt-env-infra">
                              <div class="tooltip-title">Environment Â· ì¸í”„ë¼ í˜¸í™˜ì„±</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì™„ì „ í˜¸í™˜ / ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥</div>
                              <div class="tooltip-line"><span>4ì </span> Â· ì „ë°˜ì  í˜¸í™˜ ì–‘í˜¸</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ë³´í†µ ìˆ˜ì¤€ í˜¸í™˜ / ì¼ë¶€ ê²€ì¦ í•„ìš”</div>
                              <div class="tooltip-line"><span>2ì </span> Â· í˜¸í™˜ì„± ë‚®ìŒ / ì¡°ì • í•„ìš”</div>
                              <div class="tooltip-line"><span>1ì </span> Â· í˜¸í™˜ ê±°ì˜ ë¶ˆê°€ / ì œì•½ ë§¤ìš° í¼</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ì—°ë™ ì§€ì› ì—¬ë¶€</td>
                        <td>
                          <select data-tf-score="envIntegration">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td>
                          <div class="info-icon" data-tooltip-id="tt-env-integration">i
                            <div class="tooltip" id="tt-env-integration">
                              <div class="tooltip-title">Environment Â· ì—°ë™ ì§€ì› ì—¬ë¶€</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì¦‰ì‹œ ì—°ë™ ê°€ëŠ¥ / ì¥ì•  ìš”ì†Œ ì—†ìŒ</div>
                              <div class="tooltip-line"><span>4ì </span> Â· ì—°ë™ ìˆ˜ì›”í•¨ / ê¸°ì¡´ ë ˆí¼ëŸ°ìŠ¤ ì¡´ì¬</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ì¼ë°˜ì  ë‚œì´ë„ / í‘œì¤€ í”„ë¡œí† ì½œ ê¸°ë°˜</div>
                              <div class="tooltip-line"><span>2ì </span> Â· ì—°ë™ ê°€ëŠ¥í•˜ë‚˜ ë‚œì´ë„ ë†’ìŒ</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ì—°ë™ ë¶ˆê°€ í˜¹ì€ ë§¤ìš° ì–´ë ¤ì›€</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>í™˜ê²½/ë„¤íŠ¸ì›Œí¬ ì œì•½</td>
                        <td>
                          <select data-tf-score="envNetwork">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td>
                          <div class="info-icon" data-tooltip-id="tt-env-network">i
                            <div class="tooltip" id="tt-env-network">
                              <div class="tooltip-title">Environment Â· í™˜ê²½ / ë„¤íŠ¸ì›Œí¬ ì œì•½</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì œì•½ ê±°ì˜ ì—†ìŒ / ìµœì  í™˜ê²½</div>
                              <div class="tooltip-line"><span>4ì </span> Â· ëŒ€ë¶€ë¶„ ë¬¸ì œ ì—†ìŒ</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ì¼ë¶€ ì œì•½ ìˆìœ¼ë‚˜ ê´€ë¦¬ ê°€ëŠ¥</div>
                              <div class="tooltip-line"><span>2ì </span> Â· ì œì•½ ì¡´ì¬ / ì„¤ì • ì¡°ì • í•„ìš”</div>
                              <div class="tooltip-line"><span>1ì </span> Â· í™˜ê²½Â·ë„¤íŠ¸ì›Œí¬ ì œì•½ ë§¤ìš° ì‹¬ê°</div>
                            </div>
                          </div>
                        </td>
                      </tr>

                      <tr class="group-row">
                        <td>Compliance &amp; Security</td>
                        <td colspan="3">ë³´ì•ˆ / ê·œì œ / ë°ì´í„°Â·ë³´ì•ˆ ì í•©ì„±</td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ë³´ì•ˆ ê²€í†  ë‚œì´ë„</td>
                        <td>
                          <select data-tf-score="compSecurity">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td>
                          <div class="info-icon" data-tooltip-id="tt-comp-security">i
                            <div class="tooltip" id="tt-comp-security">
                              <div class="tooltip-title">Compliance Â· ë³´ì•ˆ ê²€í†  ë‚œì´ë„</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ë¬¸ì œ ì—†ìŒ / ìŠ¹ì¸ í™•ì‹¤</div>
                              <div class="tooltip-line"><span>4ì </span> Â· ëŒ€ë¶€ë¶„ ì¶©ì¡± / ìŠ¹ì¸ ê°€ëŠ¥ì„± ë†’ìŒ</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ë³´í†µ ë‚œì´ë„ / ì¼ë¶€ ê²€í†  í•„ìš”</div>
                              <div class="tooltip-line"><span>2ì </span> Â· ì¶©ì¡± ê°€ëŠ¥í•˜ë‚˜ ë¶ˆí™•ì‹¤ì„± í¼</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ë³´ì•ˆ ì¶©ì¡± ì–´ë ¤ì›€ / ë¦¬ìŠ¤í¬ í¼</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ê·œì œ ì¤€ìˆ˜ ê°€ëŠ¥ì„±</td>
                        <td>
                          <select data-tf-score="compRegulatory">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td>
                          <div class="info-icon" data-tooltip-id="tt-comp-reg">i
                            <div class="tooltip" id="tt-comp-reg">
                              <div class="tooltip-title">Compliance Â· ê·œì œ ì¤€ìˆ˜ ê°€ëŠ¥ì„±</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì™„ì „ ì¶©ì¡± / ê²€ì¦ ë¬¸ì œ ì—†ìŒ</div>
                              <div class="tooltip-line"><span>4ì </span> Â· ê·œì œ ì¶©ì¡± ê°€ëŠ¥ì„±ì´ ë†’ìŒ</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ëŒ€ë¶€ë¶„ ì¶©ì¡± / ì¶”ê°€ ì¡°ì • í•„ìš”</div>
                              <div class="tooltip-line"><span>2ì </span> Â· ì¶©ì¡± ê°€ëŠ¥í•˜ë‚˜ ì¥ì• ë¬¼ ë§ìŒ</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ê·œì œ ì¶©ì¡± ë¶ˆê°€</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ë°ì´í„°/ë³´ì•ˆ ì í•©ì„±</td>
                        <td>
                          <select data-tf-score="compData">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td>
                          <div class="info-icon" data-tooltip-id="tt-comp-data">i
                            <div class="tooltip" id="tt-comp-data">
                              <div class="tooltip-title">Compliance Â· ë°ì´í„°/ë³´ì•ˆ ì í•©ì„±</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì™„ì „ ì í•© / ìš”êµ¬ ì¶©ì¡±</div>
                              <div class="tooltip-line"><span>4ì </span> Â· ì „ë°˜ì  ì í•© / ë¦¬ìŠ¤í¬ ë‚®ìŒ</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ëŒ€ë¶€ë¶„ ì¶©ì¡± / ì¡°ì • ê°€ëŠ¥</div>
                              <div class="tooltip-line"><span>2ì </span> Â· ì¼ë¶€ ë¶ˆì¼ì¹˜ / ìˆ˜ì • í•„ìš”</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ìš”êµ¬ ê¸°ì¤€ê³¼ ë¶ˆì¼ì¹˜</div>
                            </div>
                          </div>
                        </td>
                      </tr>

                      <tr class="group-row">
                        <td>Human &amp; Execution Readiness</td>
                        <td colspan="3">ê³ ê° ê¸°ìˆ íŒ€ / ì§€ì› ë¦¬ì†ŒìŠ¤ / ì¼ì • í˜„ì‹¤ì„±</td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ê³ ê° ê¸°ìˆ íŒ€ ì¤€ë¹„ë„</td>
                        <td>
                          <select data-tf-score="humanTeam">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td>
                          <div class="info-icon" data-tooltip-id="tt-human-team">i
                            <div class="tooltip" id="tt-human-team">
                              <div class="tooltip-title">Human Â· ê³ ê° ê¸°ìˆ íŒ€ ì¤€ë¹„ë„</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ë§¤ìš° ì ê·¹ì  / ì „ë¬¸ì„± ë†’ìŒ</div>
                              <div class="tooltip-line"><span>4ì </span> Â· ì—­ëŸ‰ ì¶©ë¶„ / í˜‘ì—… ì ê·¹ì </div>
                              <div class="tooltip-line"><span>3ì </span> Â· ê¸°ë³¸ ì—­ëŸ‰ ì¶©ë¶„ / ì¼ë°˜ì  ìˆ˜í–‰ ê°€ëŠ¥</div>
                              <div class="tooltip-line"><span>2ì </span> Â· ë¦¬ì†ŒìŠ¤ ë¶€ì¡± / ì¼ì • ìœ„í—˜</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ë¦¬ì†ŒìŠ¤ ì—†ìŒ / ì§„í–‰ ë¶ˆê°€</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ë„ì… ì§€ì› ë¦¬ì†ŒìŠ¤</td>
                        <td>
                          <select data-tf-score="humanSupport">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td>
                          <div class="info-icon" data-tooltip-id="tt-human-support">i
                            <div class="tooltip" id="tt-human-support">
                              <div class="tooltip-title">Human Â· ë„ì… ì§€ì› ë¦¬ì†ŒìŠ¤</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì¦‰ì‹œ íˆ¬ì… ê°€ëŠ¥ / ì—¬ìœ  ìˆìŒ</div>
                              <div class="tooltip-line"><span>4ì </span> Â· ì¶©ë¶„í•œ ì§€ì› ê°€ëŠ¥</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ì¼ë°˜ì  ìˆ˜ì¤€ / ì¼ë¶€ ì¡°ìœ¨ í•„ìš”</div>
                              <div class="tooltip-line"><span>2ì </span> Â· ë¦¬ì†ŒìŠ¤ ë¶€ì¡± / ì¼ì • ë¶ˆí™•ì‹¤</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ì§€ì› ë¦¬ì†ŒìŠ¤ ê±°ì˜ ì—†ìŒ</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ì¼ì •/ë²”ìœ„ í˜„ì‹¤ì„±</td>
                        <td>
                          <select data-tf-score="humanTimeline">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td>
                          <div class="info-icon" data-tooltip-id="tt-human-timeline">i
                            <div class="tooltip" id="tt-human-timeline">
                              <div class="tooltip-title">Human Â· ì¼ì •/ë²”ìœ„ í˜„ì‹¤ì„±</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì¦‰ì‹œ ì°©ìˆ˜ ê°€ëŠ¥ / ê°•í•œ ì¶”ì§„ë ¥</div>
                              <div class="tooltip-line"><span>4ì </span> Â· ì¼ì • ëª…í™• / ì‹¤í–‰ë ¥ ìˆìŒ</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ì¼ì • ì¡´ì¬ / ë³€ë™ ê°€ëŠ¥ì„± ìˆìŒ</div>
                              <div class="tooltip-line"><span>2ì </span> Â· ì¼ì • ëª¨í˜¸ / ìš°ì„ ìˆœìœ„ ë‚®ìŒ</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ì¼ì • ë¶ˆëª…í™• / ì‹¤í˜„ ì–´ë ¤ì›€</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div>
                  <div class="weight-card">
                    <div class="weight-card-header">
                      <div class="weight-card-title">ê°€ì¤‘ì¹˜ ì„¤ì •</div>
                      <span class="pill-muted">í•©ê³„ = 1.00</span>
                    </div>

                    <div class="weight-row">
                      <span>Technical Fit</span>
                      <div class="weight-controls">
                        <button type="button" class="weight-btn"
                          data-target="tfWeightTechnicalFit" data-delta="-0.01">âˆ’</button>
                        <input type="number" step="0.01" class="weight-input"
                          id="tfWeightTechnicalFit" value="0.35" />
                        <button type="button" class="weight-btn"
                          data-target="tfWeightTechnicalFit" data-delta="0.01">+</button>
                      </div>
                    </div>

                    <div class="weight-row">
                      <span>Environment &amp; Integration</span>
                      <div class="weight-controls">
                        <button type="button" class="weight-btn"
                          data-target="tfWeightEnvironment" data-delta="-0.01">âˆ’</button>
                        <input type="number" step="0.01" class="weight-input"
                          id="tfWeightEnvironment" value="0.25" />
                        <button type="button" class="weight-btn"
                          data-target="tfWeightEnvironment" data-delta="0.01">+</button>
                      </div>
                    </div>

                    <div class="weight-row">
                      <span>Compliance &amp; Security</span>
                      <div class="weight-controls">
                        <button type="button" class="weight-btn"
                          data-target="tfWeightCompliance" data-delta="-0.01">âˆ’</button>
                        <input type="number" step="0.01" class="weight-input"
                          id="tfWeightCompliance" value="0.20" />
                        <button type="button" class="weight-btn"
                          data-target="tfWeightCompliance" data-delta="0.01">+</button>
                      </div>
                    </div>

                    <div class="weight-row">
                      <span>Human &amp; Execution</span>
                      <div class="weight-controls">
                        <button type="button" class="weight-btn"
                          data-target="tfWeightHuman" data-delta="-0.01">âˆ’</button>
                        <input type="number" step="0.01" class="weight-input"
                          id="tfWeightHuman" value="0.20" />
                        <button type="button" class="weight-btn"
                          data-target="tfWeightHuman" data-delta="0.01">+</button>
                      </div>
                    </div>

                    <div id="tfWeightSumText" class="weight-sum">
                      í•©ê³„: 1.00
                    </div>
                    <div class="helper-text">
                      ê°€ì¤‘ì¹˜ì˜ í•©ì€ 100%(1)ì…ë‹ˆë‹¤. í•©ê³„ê°€ 1ì„ ë„˜ê±°ë‚˜ ëª¨ìë¼ë©´ ê²°ê³¼ ê³„ì‚°ì´ ë¹„í™œì„±í™”ë©ë‹ˆë‹¤.
                    </div>
                  </div>
                </div>
              </div>

              <div class="section-footer">
                <div class="helper-text">
                  ëª¨ë“  ì í•©ì„± í•­ëª©ê³¼ ê°€ì¤‘ì¹˜ë¥¼ ì„¤ì •í•œ ë’¤, ê²°ê³¼ ë³´ê¸°ë¥¼ ëˆŒëŸ¬ Technical Fit Scoreì™€ Risk Levelì„ í™•ì¸í•˜ì„¸ìš”.
                </div>
                <div>
                  <button class="btn-secondary" id="techFitResultButton">
                    ê²°ê³¼ ë³´ê¸°
                  </button>
                </div>
              </div>

              <div id="techFitResultArea" style="display:none;">
                <div class="result-summary">
                  <div class="result-pill">
                    <div>
                      <div class="result-label">Technical Fit Score</div>
                      <div id="techScoreValue">-</div>
                    </div>
                    <div>
                      <div class="result-label">Risk Level</div>
                      <div id="techRiskValue">-</div>
                    </div>
                  </div>
                </div>
                <div class="risk-card">
                  <div class="risk-card-header">
                    <div class="risk-card-title">Risk Summary</div>
                    <span class="risk-chip">í•©ì‚° ì ìˆ˜ 2 ì´í•˜ í•­ëª©</span>
                  </div>
                  <ul class="risk-list" id="techFitRiskList"></ul>
                </div>
              </div>
            </div>
          </div>

          <!-- Dashboard -->
          <div class="section-card" id="dashboardSection" style="display:none;">
            <div class="section-header">
              <div>
                <div class="section-title">
                  <span>Dashboard</span>
                  <span class="pill-muted">Quadrant View</span>
                </div>
                <div class="section-subtitle">
                  Business Fit(Deal Win Score)ì™€ Technical Fit Scoreë¥¼ ê¸°ë°˜ìœ¼ë¡œ Deal ìƒíƒœë¥¼ 2Ã—2 Quadrantë¡œ í‘œì‹œí•©ë‹ˆë‹¤.
                </div>
              </div>
            </div>
            <div class="section-body">
              <div class="metrics-row">
                <div class="metric-card">
                  <div class="metric-label">Deal Name</div>
                  <div class="metric-value" id="dashDealName">-</div>
                  <div class="metric-sub" id="dashDealDescription"></div>
                </div>
                <div class="metric-card">
                  <div class="metric-label">Deal Win Score (Business Fit)</div>
                  <div class="metric-value" id="dashDealScore">-</div>
                  <div class="metric-sub" id="dashWinProb"></div>
                </div>
                <div class="metric-card">
                  <div class="metric-label">Technical Fit Score</div>
                  <div class="metric-value" id="dashTechScore">-</div>
                  <div class="metric-sub" id="dashTechRisk"></div>
                </div>
              </div>

              <div class="dashboard-grid">
                <div class="quadrant-card">
                  <div class="quadrant-header">
                    <span>Quadrant View (Business Fit vs Technical Fit)</span>
                    <span style="font-size:11px;color:#6b7280;">Xì¶•: Deal Win Score Â· Yì¶•: Technical Fit Score</span>
                  </div>
                  <canvas id="quadrantCanvas"></canvas>
                </div>
                <div class="summary-card">
                  <div class="summary-zone" id="summaryZone">-</div>
                  <div class="summary-body" id="summaryBody">
                    Deal ê²°ê³¼ë¥¼ ê³„ì‚°í•˜ë©´ ìë™ìœ¼ë¡œ ì´í‰ì´ ìƒì„±ë©ë‹ˆë‹¤.
                  </div>
                  <div class="summary-actions" id="summaryActions">
                    ê¶Œì¥ ì•¡ì…˜ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Admin Tab -->
        <section class="section" id="tab-admin" style="display:none;">
          <div class="section-card">
            <div class="section-header">
              <div>
                <div class="section-title">
                  <span>Admin</span>
                  <span class="pill-muted">Deal History</span>
                </div>
                <div class="section-subtitle">
                  Dashboardê¹Œì§€ ì™„ë£Œëœ Dealì„ ë¡œì»¬ì— ì €ì¥í•˜ê³ , ë‹¤ì‹œ ì¡°íšŒí•˜ê±°ë‚˜ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </div>
              </div>
            </div>
            <div class="section-body">
              <div class="admin-list" id="adminList">
                <div class="admin-header-row">
                  <div>Deal</div>
                  <div>ì‘ì„± ì¼ì‹œ</div>
                  <div style="text-align:right;">Actions</div>
                </div>
                <div id="adminListBody">
                  <div class="admin-empty">ì•„ì§ ì €ì¥ëœ Dealì´ ì—†ìŠµë‹ˆë‹¤. Deal í‰ê°€ë¥¼ ì™„ë£Œí•˜ë©´ ì´ê³³ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>
  </div>

  <!-- Modal -->
  <div class="modal-backdrop" id="modalBackdrop">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="modal-header">
        <div class="modal-title" id="modalTitle">ì•Œë¦¼</div>
        <button class="btn-ghost" id="modalCloseButton">âœ•</button>
      </div>
      <div class="modal-body" id="modalBody">ë‚´ìš©</div>
      <div class="modal-sub">ì°½ ë°–ì„ í´ë¦­í•´ë„ ë‹«í™ë‹ˆë‹¤.</div>
    </div>
  </div>

  <script>
    let currentDeal = null;
    const STORAGE_KEY = "dqDeals_v1";

    function showTab(tab) {
      const tabQualification = document.getElementById("tab-qualification");
      const tabAdmin = document.getElementById("tab-admin");
      const buttons = document.querySelectorAll(".tab-button");

      if (tab === "qualification") {
        tabQualification.style.display = "";
        tabAdmin.style.display = "none";
      } else {
        tabQualification.style.display = "none";
        tabAdmin.style.display = "";
      }

      buttons.forEach((btn) => {
        const t = btn.dataset.tab;
        if (t === tab) {
          btn.classList.add("active");
          btn.setAttribute("aria-selected", "true");
        } else {
          btn.classList.remove("active");
          btn.setAttribute("aria-selected", "false");
        }
      });
    }

    function showModal(title, body) {
      const backdrop = document.getElementById("modalBackdrop");
      document.getElementById("modalTitle").textContent = title;
      document.getElementById("modalBody").textContent = body;
      backdrop.classList.add("visible");
    }

    function hideModal() {
      document.getElementById("modalBackdrop").classList.remove("visible");
    }

    function readWeight(id) {
      const el = document.getElementById(id);
      const v = parseFloat(el.value);
      return isNaN(v) ? 0 : v;
    }

    function setupWeightButtons() {
      const buttons = document.querySelectorAll(".weight-btn");
      buttons.forEach((btn) => {
        btn.addEventListener("click", () => {
          const targetId = btn.dataset.target;
          const delta = parseFloat(btn.dataset.delta || "0");
          const input = document.getElementById(targetId);
          if (!input) return;
          let val = parseFloat(input.value);
          if (isNaN(val)) val = 0;
          val += delta;
          if (val < 0) val = 0;
          if (val > 1) val = 1;
          input.value = val.toFixed(2);
          input.dispatchEvent(new Event("input", { bubbles: true }));
        });
      });
    }

    function setupWeightValidation(prefix, ids, sumTextId, buttonId) {
      const inputs = ids.map((id) => document.getElementById(id));
      const sumText = document.getElementById(sumTextId);
      const button = document.getElementById(buttonId);

      function update() {
        let sum = 0;
        inputs.forEach((el) => {
          const v = parseFloat(el.value);
          if (!isNaN(v)) sum += v;
        });
        sumText.textContent = "í•©ê³„: " + sum.toFixed(2);
        if (Math.abs(sum - 1) > 0.001) {
          sumText.classList.add("error");
          button.disabled = true;
        } else {
          sumText.classList.remove("error");
          button.disabled = false;
        }
      }

      inputs.forEach((el) => el.addEventListener("input", update));
      update();
    }

    function getSelectValue(name, type) {
      const selector = type === "dw"
        ? `select[data-dw-score="${name}"]`
        : `select[data-tf-score="${name}"]`;
      const el = document.querySelector(selector);
      if (!el) return null;
      const v = parseInt(el.value, 10);
      return isNaN(v) ? null : v;
    }

    function avg(values) {
      const valid = values.filter((v) => v != null);
      if (!valid.length) return null;
      const s = valid.reduce((a, b) => a + b, 0);
      return s / valid.length;
    }

    function computeDealWinScore() {
      const budgetReadiness = getSelectValue("budgetReadiness", "dw");
      const authorityChampion = getSelectValue("authorityChampion", "dw");
      const authorityAccess = getSelectValue("authorityAccess", "dw");
      const needFit = getSelectValue("needFit", "dw");
      const needCompetition = getSelectValue("needCompetition", "dw");
      const timelineUrgency = getSelectValue("timelineUrgency", "dw");
      const timelineEase = getSelectValue("timelineEase", "dw");

      const values = [
        budgetReadiness, authorityChampion, authorityAccess,
        needFit, needCompetition, timelineUrgency, timelineEase
      ];

      if (values.some((v) => v == null)) {
        showModal("ì…ë ¥ ì˜¤ë¥˜", "ëª¨ë“  Deal í•­ëª©ì— ì ìˆ˜ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.");
        return;
      }

      const budgetSum = budgetReadiness;
      const authoritySum = avg([authorityChampion, authorityAccess]);
      const needSum = avg([needFit, needCompetition]);
      const timelineSum = avg([timelineUrgency, timelineEase]);

      const wB = readWeight("dwWeightBudget");
      const wN = readWeight("dwWeightNeed");
      const wA = readWeight("dwWeightAuthority");
      const wT = readWeight("dwWeightTimeline");
      const wSum = wB + wN + wA + wT;
      if (Math.abs(wSum - 1) > 0.001) {
        showModal("ê°€ì¤‘ì¹˜ ì˜¤ë¥˜", "Deal Win Score ê°€ì¤‘ì¹˜ í•©ê³„ê°€ 1ì´ ì•„ë‹™ë‹ˆë‹¤. í•©ê³„ë¥¼ 1ë¡œ ë§ì¶˜ ë’¤ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.");
        return;
      }

      const raw =
        (wB * budgetSum) +
        (wA * authoritySum) +
        (wN * needSum) +
        (wT * timelineSum);

      const dealScore = (raw / 5) * 100;
      const dealScoreRounded = Math.max(0, Math.min(100, dealScore));

      let winProb = 10;
      let winLabel = "ë§¤ìš° ë‚®ìŒ";
      if (dealScoreRounded >= 81) {
        winProb = 90; winLabel = "ë§¤ìš° ë†’ìŒ";
      } else if (dealScoreRounded >= 61) {
        winProb = 70; winLabel = "ë†’ìŒ";
      } else if (dealScoreRounded >= 41) {
        winProb = 50; winLabel = "ì¤‘ê°„";
      } else if (dealScoreRounded >= 21) {
        winProb = 30; winLabel = "ë‚®ìŒ";
      }

      document.getElementById("dealScoreValue").textContent =
        dealScoreRounded.toFixed(1) + "%";
      document.getElementById("winProbValue").textContent =
        winProb + "% (" + winLabel + ")";

      const summaryText = `${dealScoreRounded.toFixed(1)}% Â· Win Prob ${winProb}% (${winLabel})`;
      document.getElementById("dealWinSummaryText").textContent = summaryText;

      const riskList = document.getElementById("dealWinRiskList");
      riskList.innerHTML = "";
      const risks = [];

      if (budgetSum <= 2) {
        risks.push("ì˜ˆì‚° ë¦¬ìŠ¤í¬: êµ¬ë§¤ ê°€ëŠ¥ì„± ë‚®ìŒ (Budget í•©ì‚° â‰¤ 2)");
      }
      if (authoritySum <= 2) {
        risks.push("Authority ë¦¬ìŠ¤í¬: ì±”í”¼ì–¸/EB ì˜í–¥ë ¥ ë° ì ‘ê·¼ì„±ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.");
      }
      if (needSum <= 2) {
        risks.push("Need ë¦¬ìŠ¤í¬: ë¬¸ì œ ì í•©ì„±ì´ ë‚®ê±°ë‚˜ ê²½ìŸ ìš°ìœ„ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.");
      }
      if (timelineSum <= 2) {
        risks.push("Timeline ë¦¬ìŠ¤í¬: ì‹œê¸‰ì„±ì´ ë‚®ê±°ë‚˜ ë„ì…ì´ ì–´ë µìŠµë‹ˆë‹¤.");
      }

      if (!risks.length) {
        const li = document.createElement("li");
        li.textContent = "íŠ¹ë³„íˆ ëˆˆì— ë„ëŠ” ë¦¬ìŠ¤í¬ëŠ” ì—†ìŠµë‹ˆë‹¤. ë‹¤ë§Œ ì„¸ë¶€ í•­ëª©ì„ ì •ì„±ì ìœ¼ë¡œ ì ê²€í•´ ë³´ì„¸ìš”.";
        riskList.appendChild(li);
      } else {
        risks.forEach((r) => {
          const li = document.createElement("li");
          li.textContent = r;
          riskList.appendChild(li);
        });
      }

      document.getElementById("dealWinResultArea").style.display = "";

      // ì„¹ì…˜ì€ ì ‘ê³  í•œ ì¤„ ìš”ì•½ë§Œ ë…¸ì¶œ
      document.getElementById("dealWinSection").style.display = "none";
      document.getElementById("dealWinSummaryBar").style.display = "flex";

      // Technical Fit ì„¹ì…˜ ì˜¤í”ˆ
      document.getElementById("techFitSection").style.display = "";

      showModal(
        "Win Probability",
        `Deal Score ${dealScoreRounded.toFixed(1)}% â†’ Win Probability ${winProb}% (${winLabel})`
      );

      if (!currentDeal) currentDeal = {};
      currentDeal.dealScore = dealScoreRounded;
      currentDeal.winProb = winProb;
      currentDeal.winProbLabel = winLabel;
      currentDeal.dealWinWeights = { wB, wN, wA, wT };
      currentDeal.dealWinGroups = {
        budget: budgetSum,
        authority: authoritySum,
        need: needSum,
        timeline: timelineSum,
      };
      currentDeal.dealWinRiskSummary = risks;
    }

    function computeTechFitScore() {
      const tfFunctional = getSelectValue("tfFunctional", "tf");
      const tfCustomization = getSelectValue("tfCustomization", "tf");
      const tfLegacy = getSelectValue("tfLegacy", "tf");

      const envInfra = getSelectValue("envInfra", "tf");
      const envIntegration = getSelectValue("envIntegration", "tf");
      const envNetwork = getSelectValue("envNetwork", "tf");

      const compSecurity = getSelectValue("compSecurity", "tf");
      const compRegulatory = getSelectValue("compRegulatory", "tf");
      const compData = getSelectValue("compData", "tf");

      const humanTeam = getSelectValue("humanTeam", "tf");
      const humanSupport = getSelectValue("humanSupport", "tf");
      const humanTimeline = getSelectValue("humanTimeline", "tf");

      const values = [
        tfFunctional, tfCustomization, tfLegacy,
        envInfra, envIntegration, envNetwork,
        compSecurity, compRegulatory, compData,
        humanTeam, humanSupport, humanTimeline
      ];

      if (values.some((v) => v == null)) {
        showModal("ì…ë ¥ ì˜¤ë¥˜", "ëª¨ë“  ì í•©ì„± í•­ëª©ì— ì ìˆ˜ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.");
        return;
      }

      const technicalFit = avg([tfFunctional, tfCustomization, tfLegacy]);
      const envIntegrationSum = avg([envInfra, envIntegration, envNetwork]);
      const complianceSum = avg([compSecurity, compRegulatory, compData]);
      const humanSum = avg([humanTeam, humanSupport, humanTimeline]);

      const wTF = readWeight("tfWeightTechnicalFit");
      const wEnv = readWeight("tfWeightEnvironment");
      const wComp = readWeight("tfWeightCompliance");
      const wHuman = readWeight("tfWeightHuman");
      const wSum = wTF + wEnv + wComp + wHuman;
      if (Math.abs(wSum - 1) > 0.001) {
        showModal("ê°€ì¤‘ì¹˜ ì˜¤ë¥˜", "Technical Fit ê°€ì¤‘ì¹˜ í•©ê³„ê°€ 1ì´ ì•„ë‹™ë‹ˆë‹¤. í•©ê³„ë¥¼ 1ë¡œ ë§ì¶˜ ë’¤ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.");
        return;
      }

      const raw =
        (wTF * technicalFit) +
        (wEnv * envIntegrationSum) +
        (wComp * complianceSum) +
        (wHuman * humanSum);

      const techScore = (raw / 5) * 100;
      const techScoreRounded = Math.max(0, Math.min(100, techScore));

      let riskLevel = "ë§¤ìš° ë†’ìŒ";
      let riskLabel = "ê¸°ìˆ ì  ë¶ˆê°€";
      if (techScoreRounded >= 81) {
        riskLevel = "ë§¤ìš° ë‚®ìŒ";
        riskLabel = "ë§¤ìš° ì í•©";
      } else if (techScoreRounded >= 61) {
        riskLevel = "ë‚®ìŒ";
        riskLabel = "ì í•©í•¨";
      } else if (techScoreRounded >= 41) {
        riskLevel = "ì¤‘ê°„";
        riskLabel = "ì£¼ì˜ í•„ìš”";
      } else if (techScoreRounded >= 21) {
        riskLevel = "ë†’ìŒ";
        riskLabel = "ì¤‘ë‹¨ ê³ ë ¤";
      }

      document.getElementById("techScoreValue").textContent =
        techScoreRounded.toFixed(1) + "%";
      document.getElementById("techRiskValue").textContent =
        riskLevel + " (" + riskLabel + ")";

      const summaryText = `${techScoreRounded.toFixed(1)}% Â· Risk ${riskLevel} (${riskLabel})`;
      document.getElementById("techFitSummaryText").textContent = summaryText;

      const riskList = document.getElementById("techFitRiskList");
      riskList.innerHTML = "";
      const risks = [];

      if (technicalFit <= 2) {
        risks.push("Technical Fit ë¦¬ìŠ¤í¬: ê¸°ëŠ¥ ì í•©ì„±/ì»¤ìŠ¤í„°ë§ˆì´ì§•/ë ˆê±°ì‹œ ì œì•½ì´ í½ë‹ˆë‹¤.");
      }
      if (envIntegrationSum <= 2) {
        risks.push("Environment & Integration ë¦¬ìŠ¤í¬: ì¸í”„ë¼/ì—°ë™/í™˜ê²½ ì œì•½ì´ í½ë‹ˆë‹¤.");
      }
      if (complianceSum <= 2) {
        risks.push("Compliance & Security ë¦¬ìŠ¤í¬: ë³´ì•ˆÂ·ê·œì œÂ·ë°ì´í„° ì í•©ì„± ë¦¬ìŠ¤í¬ê°€ ë†’ìŠµë‹ˆë‹¤.");
      }
      if (humanSum <= 2) {
        risks.push("Human & Execution ë¦¬ìŠ¤í¬: ê³ ê° ê¸°ìˆ íŒ€Â·ì§€ì› ë¦¬ì†ŒìŠ¤Â·ì¼ì • í˜„ì‹¤ì„±ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.");
      }

      if (!risks.length) {
        const li = document.createElement("li");
        li.textContent = "íŠ¹ë³„íˆ ëˆˆì— ë„ëŠ” ê¸°ìˆ  ë¦¬ìŠ¤í¬ëŠ” ì—†ìŠµë‹ˆë‹¤. ë³´ì•ˆÂ·ê·œì œÂ·í™˜ê²½ì€ ë³„ë„ë¡œ ë‹¤ì‹œ ì ê²€í•´ ë³´ì„¸ìš”.";
        riskList.appendChild(li);
      } else {
        risks.forEach((r) => {
          const li = document.createElement("li");
          li.textContent = r;
          riskList.appendChild(li);
        });
      }

      document.getElementById("techFitResultArea").style.display = "";

      // ì„¹ì…˜ ì ‘ê³  í•œ ì¤„ ìš”ì•½ë§Œ
      document.getElementById("techFitSection").style.display = "none";
      document.getElementById("techFitSummaryBar").style.display = "flex";

      // Dashboard ë¨¼ì € ë³´ì´ê²Œ
      const dashboardSection = document.getElementById("dashboardSection");
      dashboardSection.style.display = "";

      if (!currentDeal) currentDeal = {};
      currentDeal.techScore = techScoreRounded;
      currentDeal.techRisk = riskLevel;
      currentDeal.techRiskLabel = riskLabel;
      currentDeal.techWeights = { wTF, wEnv, wComp, wHuman };
      currentDeal.techGroups = {
        technicalFit,
        envIntegration: envIntegrationSum,
        compliance: complianceSum,
        human: humanSum,
      };
      currentDeal.techRiskSummary = risks;

      // Dashboard ì—…ë°ì´íŠ¸ ë° Quadrant ê·¸ë¦¬ê¸°
      updateDashboard();
      dashboardSection.scrollIntoView({ behavior: "smooth", block: "start" });

      showModal(
        "Technical Risk Level",
        `Technical Fit Score ${techScoreRounded.toFixed(1)}% â†’ Risk Level ${riskLevel} (${riskLabel})`
      );

      // ì €ì¥
      saveCurrentDeal();
      refreshAdminList();
    }

    function drawQuadrant(bizScore, techScore) {
      const canvas = document.getElementById("quadrantCanvas");
      if (!canvas) return;
      const rect = canvas.getBoundingClientRect();
      if (!rect.width || !rect.height) return;

      const dpr = window.devicePixelRatio || 1;
      canvas.width = rect.width * dpr;
      canvas.height = rect.height * dpr;
      const ctx = canvas.getContext("2d");
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

      const width = rect.width;
      const height = rect.height;
      const margin = 28;
      const plotWidth = width - margin * 2;
      const plotHeight = height - margin * 2;

      ctx.clearRect(0, 0, width, height);

      // ë°°ê²½
      ctx.fillStyle = "#f9fafb";
      ctx.fillRect(0, 0, width, height);

      // Quadrant ë°°ê²½ ìƒ‰ (ì—°í•œ í†¤)
      const midX = margin + plotWidth / 2;
      const midY = margin + plotHeight / 2;

      // ì¢Œìƒ (Tech OK but Biz Weak)
      ctx.fillStyle = "#E3F2FD"; // ì—°í•œ íŒŒë‘
      ctx.fillRect(margin, margin, plotWidth / 2, plotHeight / 2);

      // ìš°ìƒ (Go)
      ctx.fillStyle = "#E8F5E9"; // ì—°í•œ ì´ˆë¡
      ctx.fillRect(midX, margin, plotWidth / 2, plotHeight / 2);

      // ì¢Œí•˜ (No-Go)
      ctx.fillStyle = "#FDECEA"; // ì—°í•œ ë¹¨ê°•
      ctx.fillRect(margin, midY, plotWidth / 2, plotHeight / 2);

      // ìš°í•˜ (Biz OK but Tech Risk)
      ctx.fillStyle = "#FFF8E1"; // ì—°í•œ ë…¸ë‘
      ctx.fillRect(midX, midY, plotWidth / 2, plotHeight / 2);

      // ì¶•
      ctx.strokeStyle = "#9ca3af";
      ctx.lineWidth = 1;
      ctx.beginPath();
      // Xì¶•
      ctx.moveTo(margin, midY);
      ctx.lineTo(margin + plotWidth, midY);
      // Yì¶•
      ctx.moveTo(midX, margin);
      ctx.lineTo(midX, margin + plotHeight);
      ctx.stroke();

      // í…Œë‘ë¦¬
      ctx.strokeStyle = "#d1d5db";
      ctx.strokeRect(margin, margin, plotWidth, plotHeight);

      // ì¶• ë¼ë²¨
      ctx.fillStyle = "#4b5563";
      ctx.font = "11px system-ui";
      ctx.fillText("Business Fit (Deal Win Score)", margin, height - 6);
      ctx.save();
      ctx.translate(6, margin + plotHeight);
      ctx.rotate(-Math.PI / 2);
      ctx.fillText("Technical Fit Score", 0, 0);
      ctx.restore();

      // Quadrant ë¼ë²¨
      ctx.font = "11px system-ui";

      // ì¢Œìƒ
      ctx.fillStyle = "#5DADE2";
      ctx.fillText("Tech OK but Biz Weak", margin + 6, margin + 14);
      // ìš°ìƒ
      ctx.fillStyle = "#4CAF50";
      ctx.fillText("Go", midX + 6, margin + 14);
      // ì¢Œí•˜
      ctx.fillStyle = "#C0392B";
      ctx.fillText("No-Go", margin + 6, midY + 14);
      // ìš°í•˜
      ctx.fillStyle = "#F4C542";
      ctx.fillText("Biz OK but Tech Risk", midX + 6, midY + 14);

      // Deal ìœ„ì¹˜ ì 
      const clampedBiz = Math.max(0, Math.min(100, bizScore || 0));
      const clampedTech = Math.max(0, Math.min(100, techScore || 0));

      const x = margin + (clampedBiz / 100) * plotWidth;
      const y = margin + plotHeight - (clampedTech / 100) * plotHeight;

      ctx.fillStyle = "#111827";
      ctx.beginPath();
      ctx.arc(x, y, 5, 0, Math.PI * 2);
      ctx.fill();

      ctx.strokeStyle = "#111827";
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.arc(x, y, 8, 0, Math.PI * 2);
      ctx.stroke();
    }

    function updateDashboard() {
      if (!currentDeal) return;
      const { name, description, dealScore, winProb, winProbLabel, techScore, techRisk, techRiskLabel } = currentDeal;
      if (dealScore == null || techScore == null) return;

      document.getElementById("dashDealName").textContent = name || "-";
      document.getElementById("dashDealDescription").textContent = description || "";

      document.getElementById("dashDealScore").textContent =
        dealScore.toFixed(1) + "%";
      document.getElementById("dashWinProb").textContent =
        `Win Prob ${winProb}% (${winProbLabel})`;

      document.getElementById("dashTechScore").textContent =
        techScore.toFixed(1) + "%";
      document.getElementById("dashTechRisk").textContent =
        `Risk ${techRisk} (${techRiskLabel})`;

      // Quadrant zone ë¶„ì„
      let zone = "No-Go Zone";
      let zoneColor = "#C0392B";
      if (dealScore >= 50 && techScore >= 50) {
        zone = "Strong Opportunity";
        zoneColor = "#4CAF50";
      } else if (dealScore >= 50 && techScore < 50) {
        zone = "Biz OK but Tech Risk";
        zoneColor = "#F4C542";
      } else if (dealScore < 50 && techScore >= 50) {
        zone = "Tech OK but Biz Weak";
        zoneColor = "#5DADE2";
      }

      const summaryZoneEl = document.getElementById("summaryZone");
      summaryZoneEl.textContent = zone;
      summaryZoneEl.style.color = zoneColor;

      let summaryBody = "";
      let actions = "";

      if (zone === "Strong Opportunity") {
        summaryBody =
          `ì´ ë”œì€ Business Fitê³¼ Technical Fit ëª¨ë‘ ì–‘í˜¸í•©ë‹ˆë‹¤. Deal Win Score ${dealScore.toFixed(1)}%, `
          + `Technical Fit ${techScore.toFixed(1)}% ìˆ˜ì¤€ìœ¼ë¡œ, ìˆ˜ì£¼ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.`;
        actions =
          "ê¶Œì¥ ì•¡ì…˜: ê²½ì¬ì  êµ¬ë§¤ì ì •ë ¬ ì¡°ê¸° í™•ë³´, ë‹¨ê³„ ë¹ ë¥´ê²Œ ì§„í–‰, PoC ìµœì†Œí™” ë˜ëŠ” ìƒëµ, ê²½ìŸì‚¬ ì°¨ë‹¨ì„ ìœ„í•œ ê³„ì•½Â·ë³´ì•ˆ ì ˆì°¨ë¥¼ ì‹ ì†íˆ ì§„í–‰í•˜ì„¸ìš”.";
      } else if (zone === "Biz OK but Tech Risk") {
        summaryBody =
          `ì´ ë”œì€ Business Fitì€ ê´œì°®ì§€ë§Œ Technical Fitì´ ìƒëŒ€ì ìœ¼ë¡œ ë‚®ìŠµë‹ˆë‹¤. `
          + `ê¸°ìˆ  ë¦¬ìŠ¤í¬ë¥¼ ëª…í™•íˆ ê´€ë¦¬í•˜ì§€ ì•Šìœ¼ë©´ PoC ì‹¤íŒ¨ë‚˜ ì¼ì • ì§€ì—°ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
        actions =
          "ê¶Œì¥ ì•¡ì…˜: ê¸°ìˆ  ë¦¬ìŠ¤í¬ë¥¼ ì†”ì§í•˜ê²Œ ê³µìœ í•˜ê³ , ëŒ€ì•ˆ ì•„í‚¤í…ì²˜Â·ë¡œë“œë§µì„ ì œì‹œí•˜ì„¸ìš”. PoC ë²”ìœ„ì™€ ì„±ê³µ ê¸°ì¤€ì„ ëª…í™•íˆ ì •ì˜í•˜ê³  IT/Secë¥¼ ì¡°ê¸°ì— ì°¸ì—¬ì‹œì¼œ ë¦¬ìŠ¤í¬ë¥¼ ì¤„ì´ì„¸ìš”.";
      } else if (zone === "Tech OK but Biz Weak") {
        summaryBody =
          `ì´ ë”œì€ ê¸°ìˆ ì ìœ¼ë¡œëŠ” ì¶©ë¶„íˆ ì í•©í•˜ì§€ë§Œ Business Fit(ì˜ˆì‚°Â·ê¶Œí•œÂ·NeedÂ·íƒ€ì´ë°)ì´ ì•½í•œ ìƒíƒœì…ë‹ˆë‹¤. `
          + `ê¸°ìˆ  ì„¤ë“ë§Œìœ¼ë¡œëŠ” ìˆ˜ì£¼ê¹Œì§€ ê°€ê¸° ì–´ë µìŠµë‹ˆë‹¤.`;
        actions =
          "ê¶Œì¥ ì•¡ì…˜: ì±”í”¼ì–¸ ë° ê²½ì œì  êµ¬ë§¤ì ê´€ì—¬ë„ë¥¼ ë†’ì´ê³ , êµ¬ë§¤ ë™ê¸°ì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ì„íŒ©íŠ¸ë¥¼ ì¬ì •ì˜í•˜ì„¸ìš”. ìƒìœ„ ê³¼ì œì™€ ì—°ê²°ëœ Value Narrativeë¥¼ ê°•í™”í•˜ê³ , ê²½ìŸ êµ¬ë„ì™€ íƒ€ì´ë° ë¦¬ìŠ¤í¬ë¥¼ ë‹¤ì‹œ ì§„ë‹¨í•˜ì„¸ìš”.";
      } else {
        summaryBody =
          `Business Fitê³¼ Technical Fit ëª¨ë‘ ë‚®ì€ í¸ì…ë‹ˆë‹¤. í˜„ì¬ ìƒíƒœë¡œëŠ” ìˆ˜ì£¼ ê°€ëŠ¥ì„±ì´ ë‚®ìœ¼ë©°, `
          + `ë¬´ë¦¬í•œ ì¶”ì ì€ íŒ€ ë¦¬ì†ŒìŠ¤ ëŒ€ë¹„ íš¨ìœ¨ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
        actions =
          "ê¶Œì¥ ì•¡ì…˜: ì´ ë”œì„ ê³„ì† ì¶”ì í•  ê°€ì¹˜ê°€ ìˆëŠ”ì§€ ì¬í‰ê°€í•˜ì„¸ìš”. í•„ìˆ˜ ê¸°ì¤€(ì˜ˆì‚°, ìŠ¤í°ì„œ, ê¸°ìˆ  ì œì•½ ë“±)ì„ ëª…í™•íˆ ì ê²€í•˜ê³ , ì¡°ê±´ë¶€ë¡œ ìœ ì§€í•˜ê±°ë‚˜ ê³¼ê°íˆ No-Goë¥¼ ì„ íƒí•˜ëŠ” ê²ƒë„ ê³ ë ¤í•´ ë³´ì„¸ìš”.";
      }

      document.getElementById("summaryBody").textContent = summaryBody;
      document.getElementById("summaryActions").textContent = actions;

      if (!currentDeal.dashboardSummary) {
        currentDeal.dashboardSummary = { zone, summaryBody, actions };
      }

      drawQuadrant(dealScore, techScore);
    }

    function loadDeals() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) return [];
        const arr = JSON.parse(raw);
        return Array.isArray(arr) ? arr : [];
      } catch {
        return [];
      }
    }

    function saveDeals(arr) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(arr));
    }

    function saveCurrentDeal() {
      if (!currentDeal || currentDeal.dealScore == null || currentDeal.techScore == null) return;

      if (!currentDeal.id) {
        currentDeal.id = Date.now();
      }
      if (!currentDeal.createdAt) {
        currentDeal.createdAt = new Date().toISOString();
      }

      const deals = loadDeals();
      const idx = deals.findIndex((d) => d.id === currentDeal.id);
      if (idx >= 0) {
        deals[idx] = currentDeal;
      } else {
        deals.push(currentDeal);
      }
      saveDeals(deals);
    }

    function formatDate(iso) {
      if (!iso) return "-";
      const d = new Date(iso);
      if (isNaN(d.getTime())) return iso;
      const yyyy = d.getFullYear();
      const mm = String(d.getMonth() + 1).padStart(2, "0");
      const dd = String(d.getDate()).padStart(2, "0");
      const hh = String(d.getHours()).padStart(2, "0");
      const mi = String(d.getMinutes()).padStart(2, "0");
      return `${yyyy}-${mm}-${dd} ${hh}:${mi}`;
    }

    function refreshAdminList() {
      const listBody = document.getElementById("adminListBody");
      const deals = loadDeals();
      listBody.innerHTML = "";

      if (!deals.length) {
        const empty = document.createElement("div");
        empty.className = "admin-empty";
        empty.textContent = "ì•„ì§ ì €ì¥ëœ Dealì´ ì—†ìŠµë‹ˆë‹¤. Deal í‰ê°€ë¥¼ ì™„ë£Œí•˜ë©´ ì´ê³³ì— í‘œì‹œë©ë‹ˆë‹¤.";
        listBody.appendChild(empty);
        return;
      }

      deals
        .slice()
        .sort((a, b) => (b.createdAt || 0).localeCompare(a.createdAt || 0))
        .forEach((deal) => {
          const row = document.createElement("div");
          row.className = "admin-row";

          const main = document.createElement("div");
          main.className = "admin-main";
          const name = document.createElement("div");
          name.className = "admin-name";
          name.textContent = deal.name || "(ì œëª© ì—†ìŒ)";
          const desc = document.createElement("div");
          desc.className = "admin-desc";
          desc.textContent = deal.description || "";
          main.appendChild(name);
          main.appendChild(desc);

          const date = document.createElement("div");
          date.className = "admin-date";
          date.textContent = formatDate(deal.createdAt);

          const actions = document.createElement("div");
          actions.className = "admin-actions";

          const viewBtn = document.createElement("button");
          viewBtn.className = "btn-secondary";
          viewBtn.textContent = "View";
          viewBtn.addEventListener("click", () => {
            currentDeal = { ...deal };
            showTab("qualification");
            document.getElementById("dashboardSection").style.display = "";
            updateDashboard();
            document.getElementById("dashboardSection").scrollIntoView({
              behavior: "smooth",
              block: "start",
            });
          });

          const delBtn = document.createElement("button");
          delBtn.className = "btn-danger";
          delBtn.textContent = "Delete";
          delBtn.addEventListener("click", () => {
            if (!confirm("ì´ Dealì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (LocalStorageì—ì„œ ì™„ì „íˆ ì‚­ì œë©ë‹ˆë‹¤)")) return;
            const all = loadDeals().filter((d) => d.id !== deal.id);
            saveDeals(all);
            refreshAdminList();
          });

          actions.appendChild(viewBtn);
          actions.appendChild(delBtn);

          row.appendChild(main);
          row.appendChild(date);
          row.appendChild(actions);

          listBody.appendChild(row);
        });
    }

    document.addEventListener("DOMContentLoaded", () => {
      // íƒ­ ì „í™˜
      document.querySelectorAll(".tab-button").forEach((btn) => {
        btn.addEventListener("click", () => {
          const tab = btn.dataset.tab;
          showTab(tab);
        });
      });

      // Start ë²„íŠ¼ (ìƒë‹¨)
      document.getElementById("startDealButton").addEventListener("click", () => {
        document.getElementById("dealInfoSection").style.display = "";
        document.getElementById("dealNameError").style.display = "none";

        // ìƒˆ Deal ì‹œì‘ ì‹œ ì´ì „ ìƒíƒœ ì¼ë¶€ ì´ˆê¸°í™”
        currentDeal = null;
        document.getElementById("dealWinSection").style.display = "none";
        document.getElementById("dealWinSummaryBar").style.display = "none";
        document.getElementById("dealWinResultArea").style.display = "none";

        document.getElementById("techFitSection").style.display = "none";
        document.getElementById("techFitSummaryBar").style.display = "none";
        document.getElementById("techFitResultArea").style.display = "none";

        document.getElementById("dashboardSection").style.display = "none";
      });

      // Deal Info â†’ Start
      document.getElementById("dealInfoCompleteButton").addEventListener("click", () => {
        const nameInput = document.getElementById("dealNameInput");
        const descInput = document.getElementById("dealDescriptionInput");
        const name = nameInput.value.trim();
        if (!name) {
          document.getElementById("dealNameError").style.display = "";
          return;
        }
        document.getElementById("dealNameError").style.display = "none";

        currentDeal = {
          name,
          description: descInput.value.trim(),
        };

        document.getElementById("dealWinSection").style.display = "";
        document.getElementById("dealWinResultArea").style.display = "none";
        document.getElementById("dealWinSummaryBar").style.display = "none";

        document.getElementById("techFitSection").style.display = "none";
        document.getElementById("techFitSummaryBar").style.display = "none";
        document.getElementById("techFitResultArea").style.display = "none";

        document.getElementById("dashboardSection").style.display = "none";

        document.getElementById("dealWinSection").scrollIntoView({
          behavior: "smooth",
          block: "start",
        });
      });

      // Deal Win ê²°ê³¼ ë²„íŠ¼
      document.getElementById("dealWinResultButton").addEventListener("click", () => {
        computeDealWinScore();
      });

      // Tech Fit ê²°ê³¼ ë²„íŠ¼
      document.getElementById("techFitResultButton").addEventListener("click", () => {
        if (!currentDeal || currentDeal.dealScore == null) {
          showModal("ìˆœì„œ ì•ˆë‚´", "ë¨¼ì € Deal Win Scoreë¥¼ ê³„ì‚°í•œ ë’¤ Technical Fit Scoreë¥¼ ê³„ì‚°í•´ ì£¼ì„¸ìš”.");
          return;
        }
        computeTechFitScore();
      });

      // ìš”ì•½ ë°” í† ê¸€
      document.querySelectorAll(".summary-toggle-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
          const targetId = btn.dataset.target;
          const section = document.getElementById(targetId);
          if (!section) return;
          const visible = section.style.display !== "none";
          section.style.display = visible ? "none" : "";
          btn.innerHTML = `<span>í¼ì¹˜ê¸°/ì ‘ê¸°</span> ${visible ? "â–¼" : "â–²"}`;
        });
      });

      // Tooltip
      document.querySelectorAll(".info-icon").forEach((icon) => {
        const ttId = icon.dataset.tooltipId;
        const tooltip = document.getElementById(ttId);
        if (!tooltip) return;
        icon.addEventListener("mouseenter", () => {
          tooltip.classList.add("visible");
        });
        icon.addEventListener("mouseleave", () => {
          tooltip.classList.remove("visible");
        });
      });

      // Modal ë‹«ê¸°
      document.getElementById("modalCloseButton").addEventListener("click", hideModal);
      document.getElementById("modalBackdrop").addEventListener("click", (e) => {
        if (e.target.id === "modalBackdrop") {
          hideModal();
        }
      });

      // ê°€ì¤‘ì¹˜ ë²„íŠ¼/ê²€ì¦
      setupWeightButtons();
      setupWeightValidation(
        "dw",
        ["dwWeightBudget", "dwWeightNeed", "dwWeightAuthority", "dwWeightTimeline"],
        "dwWeightSumText",
        "dealWinResultButton"
      );
      setupWeightValidation(
        "tf",
        ["tfWeightTechnicalFit", "tfWeightEnvironment", "tfWeightCompliance", "tfWeightHuman"],
        "tfWeightSumText",
        "techFitResultButton"
      );

      // Admin ë¦¬ìŠ¤íŠ¸ ì´ˆê¸°í™”
      refreshAdminList();
    });
  </script>
</body>
</html>
