<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Deal Qualification Tool</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg-body: #f5f5f7;
      --bg-surface: #ffffff;
      --bg-subtle: #f9fafb;
      --border-subtle: #e5e7eb;
      --border-strong: #d1d5db;
      --text-main: #111827;
      --text-muted: #6b7280;
      --accent: #4f46e5;
      --accent-soft: rgba(79, 70, 229, 0.08);
      --danger: #dc2626;
      --radius-lg: 14px;
      --radius-md: 10px;
      --radius-sm: 6px;
      --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.10);
      --shadow-card: 0 10px 25px rgba(15, 23, 42, 0.06);
      --font-sans: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      margin: 0;
      padding: 0;
      font-family: var(--font-sans);
      background: radial-gradient(circle at top left, #f9fafb, #eef2ff);
      color: var(--text-main);
    }

    body {
      min-height: 100vh;
    }

    .app-shell {
      max-width: 1120px;
      margin: 24px auto 40px auto;
      padding: 0 16px;
    }

    .app-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      gap: 12px;
    }

    .app-title {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo-pill {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: linear-gradient(135deg, #111827, #4b5563);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #f9fafb;
      font-size: 16px;
      font-weight: 600;
      box-shadow: 0 10px 25px rgba(15, 23, 42, 0.35);
    }

    .app-title h1 {
      margin: 0;
      font-size: 20px;
      letter-spacing: -0.02em;
    }

    .app-title span {
      display: block;
      font-size: 12px;
      color: var(--text-muted);
    }

    .header-meta {
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .badge {
      border-radius: 999px;
      font-size: 11px;
      padding: 4px 10px;
      border: 1px solid rgba(17, 24, 39, 0.08);
      background: rgba(255, 255, 255, 0.8);
      color: var(--text-muted);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      backdrop-filter: blur(12px);
    }

    .badge-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.18);
    }

    .main-card {
      background: rgba(255, 255, 255, 0.96);
      border-radius: 20px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(148, 163, 184, 0.4);
      padding: 16px 16px 20px 16px;
      backdrop-filter: blur(18px);
    }

    .tabs {
      display: flex;
      gap: 4px;
      padding: 4px;
      border-radius: 999px;
      background: #f3f4f6;
      width: fit-content;
    }

    .tab-button {
      border-radius: 999px;
      border: none;
      padding: 6px 16px;
      font-size: 13px;
      background: transparent;
      color: var(--text-muted);
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: all 0.16s ease;
    }

    .tab-button span.icon {
      font-size: 14px;
    }

    .tab-button.active {
      background: #ffffff;
      color: var(--text-main);
      box-shadow: 0 4px 14px rgba(15, 23, 42, 0.13);
    }

    .tab-button:focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }

    .tab-bar-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      flex-wrap: wrap;
      gap: 8px;
    }

    .start-area {
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--text-muted);
      font-size: 13px;
    }

    .btn-primary,
    .btn-secondary,
    .btn-ghost,
    .btn-danger {
      border-radius: 999px;
      font-size: 13px;
      padding: 7px 14px;
      border: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: all 0.16s ease;
      white-space: nowrap;
    }

    .btn-primary {
      background: #111827;
      color: #f9fafb;
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.35);
    }

    .btn-primary:hover {
      background: #020617;
      transform: translateY(-1px);
      box-shadow: 0 12px 24px rgba(15, 23, 42, 0.4);
    }

    .btn-primary:disabled {
      opacity: 0.4;
      cursor: default;
      transform: none;
      box-shadow: none;
    }

    .btn-secondary {
      background: #e5e7eb;
      color: #111827;
    }

    .btn-secondary:hover {
      background: #d1d5db;
    }

    .btn-ghost {
      background: transparent;
      color: var(--text-muted);
      padding-inline: 8px;
    }

    .btn-danger {
      background: #fee2e2;
      color: #b91c1c;
    }

    .btn-danger:hover {
      background: #fecaca;
    }

    .content {
      margin-top: 8px;
    }

    .section {
      margin-bottom: 14px;
    }

    .section-card {
      background: var(--bg-subtle);
      border-radius: var(--radius-lg);
      padding: 14px 16px;
      border: 1px solid var(--border-subtle);
      box-shadow: var(--shadow-card);
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      gap: 8px;
    }

    .section-title {
      font-size: 14px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .section-subtitle {
      font-size: 12px;
      color: var(--text-muted);
    }

    .pill-muted {
      font-size: 11px;
      border-radius: 999px;
      padding: 2px 8px;
      background: rgba(15, 23, 42, 0.04);
      color: var(--text-muted);
    }

    .collapse-toggle {
      border-radius: 999px;
      border: none;
      background: transparent;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: var(--text-muted);
      cursor: pointer;
      padding: 3px 8px;
    }

    .collapse-toggle:hover {
      background: rgba(15, 23, 42, 0.06);
    }

    .section-body {
      margin-top: 8px;
    }

    .section-body.collapsed {
      display: none;
    }

    /* Deal info form */
    .deal-info-grid {
      display: grid;
      grid-template-columns: 1.2fr 2fr;
      gap: 12px;
      align-items: flex-start;
    }

    .form-field {
      margin-bottom: 8px;
    }

    .form-label {
      font-size: 12px;
      font-weight: 500;
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 4px;
      color: #374151;
    }

    .required-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: var(--danger);
    }

    input[type="text"],
    textarea,
    input[type="number"],
    select {
      width: 100%;
      border-radius: 10px;
      border: 1px solid var(--border-subtle);
      padding: 7px 9px;
      font-size: 13px;
      background: #ffffff;
      color: var(--text-main);
      transition: border-color 0.15s ease, box-shadow 0.15s ease,
        background-color 0.15s ease;
    }

    input[type="text"]:focus,
    textarea:focus,
    input[type="number"]:focus,
    select:focus {
      outline: none;
      border-color: #6366f1;
      box-shadow: 0 0 0 1px rgba(99, 102, 241, 0.3);
      background: #ffffff;
    }

    textarea {
      resize: vertical;
      min-height: 72px;
    }

    .form-footer {
      display: flex;
      justify-content: flex-end;
      margin-top: 6px;
    }

    .error-text {
      font-size: 11px;
      color: var(--danger);
      margin-top: 4px;
    }

    /* Tables */
    .grid-two {
      display: grid;
      grid-template-columns: minmax(0, 2fr) minmax(0, 1.1fr);
      gap: 12px;
    }

    .score-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
    }

    .score-table thead {
      background: #e5e7eb;
    }

    .score-table th,
    .score-table td {
      padding: 6px 8px;
      border-bottom: 1px solid #e5e7eb;
      text-align: left;
      vertical-align: middle;
    }

    .score-table th:first-child,
    .score-table td:first-child {
      border-left: 1px solid #e5e7eb;
    }

    .score-table th:last-child,
    .score-table td:last-child {
      border-right: 1px solid #e5e7eb;
    }

    .score-table th {
      font-weight: 500;
      color: #374151;
    }

    .score-table tbody tr:nth-child(even) {
      background: #f9fafb;
    }

    .score-table caption {
      text-align: left;
      font-size: 12px;
      margin-bottom: 6px;
      color: var(--text-muted);
    }

    .group-row {
      background: #f3f4f6 !important;
      font-weight: 600;
      font-size: 11px;
      color: #111827;
    }

    .info-icon {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      border: 1px solid #d1d5db;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      color: #6b7280;
      cursor: pointer;
      background: #ffffff;
      position: relative;
    }

    .tooltip {
      position: absolute;
      z-index: 30;
      top: 125%;
      left: 50%;
      transform: translateX(-50%);
      min-width: 220px;
      max-width: 260px;
      background: #111827;
      color: #f9fafb;
      border-radius: 10px;
      padding: 8px 10px;
      font-size: 11px;
      box-shadow: 0 12px 30px rgba(15, 23, 42, 0.5);
      display: none;
    }

    .tooltip.visible {
      display: block;
    }

    .tooltip-title {
      font-weight: 600;
      margin-bottom: 4px;
    }

    .tooltip-line {
      margin-bottom: 2px;
      color: #e5e7eb;
    }

    .tooltip-line span {
      font-weight: 500;
    }

    /* Weights */
    .weight-card {
      background: #f9fafb;
      border-radius: 12px;
      padding: 8px 10px;
      border: 1px dashed var(--border-subtle);
      font-size: 12px;
    }

    .weight-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 4px;
    }

    .weight-card-title {
      font-weight: 500;
      font-size: 12px;
    }

    .weight-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 4px;
    }

    .weight-row span {
      font-size: 12px;
      color: #374151;
    }

    .weight-input {
      width: 64px;
      text-align: right;
      font-variant-numeric: tabular-nums;
    }

    .weight-sum {
      font-size: 11px;
      color: var(--text-muted);
      text-align: right;
      margin-top: 2px;
    }

    .weight-sum.error {
      color: var(--danger);
    }

    .helper-text {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 2px;
    }

    /* Results & summaries */
    .section-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 10px;
      gap: 8px;
      flex-wrap: wrap;
    }

    .result-summary {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 8px;
      margin-top: 8px;
    }

    .result-pill {
      background: #111827;
      color: #f9fafb;
      border-radius: 999px;
      padding: 6px 12px;
      font-size: 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
    }

    .result-label {
      font-size: 11px;
      color: #d1d5db;
    }

    .risk-card {
      margin-top: 8px;
      background: #111827;
      color: #f9fafb;
      border-radius: 14px;
      padding: 8px 10px;
      font-size: 12px;
    }

    .risk-card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 4px;
      gap: 6px;
    }

    .risk-card-title {
      font-weight: 500;
      font-size: 12px;
    }

    .risk-chip {
      font-size: 11px;
      border-radius: 999px;
      padding: 2px 8px;
      background: rgba(248, 250, 252, 0.08);
      color: #e5e7eb;
    }

    .risk-list {
      margin: 0;
      padding-left: 16px;
    }

    .risk-list li {
      margin-bottom: 2px;
    }

    /* Summary bars (used only inside dashboard) */
    .summary-bar {
      padding: 6px 10px;
      border-radius: 999px;
      background: #eef2ff;
      color: #111827;
      font-size: 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
      margin-bottom: 6px;
    }

    .summary-bar span.label {
      font-weight: 500;
    }

    .summary-bar small {
      color: #4b5563;
      font-size: 11px;
    }

    /* Modal (reserved, currently unused visually) */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.45);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 50;
    }

    .modal-backdrop.visible {
      display: flex;
    }

    .modal {
      background: #111827;
      color: #f9fafb;
      border-radius: 18px;
      padding: 14px 16px;
      width: min(380px, 90vw);
      box-shadow: 0 24px 60px rgba(0, 0, 0, 0.75);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
    }

    .modal-title {
      font-size: 14px;
      font-weight: 600;
    }

    .modal-body {
      font-size: 13px;
      color: #e5e7eb;
    }

    .modal-sub {
      font-size: 11px;
      color: #9ca3af;
      margin-top: 4px;
    }

    /* Dashboard */
    .dashboard-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1.1fr);
      gap: 12px;
    }

    .metrics-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 8px;
      margin-bottom: 8px;
    }

    .metric-card {
      background: #f9fafb;
      border-radius: 12px;
      padding: 8px 10px;
      border: 1px solid var(--border-subtle);
      font-size: 12px;
    }

    .metric-label {
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 2px;
    }

    .metric-value {
      font-size: 18px;
      font-weight: 600;
      letter-spacing: -0.02em;
    }

    .metric-sub {
      font-size: 11px;
      color: #4b5563;
      margin-top: 2px;
    }

    .quadrant-card {
      background: #f9fafb;
      border-radius: 14px;
      padding: 8px;
      border: 1px solid var(--border-subtle);
    }

    .quadrant-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 6px;
      font-size: 12px;
    }

    canvas#quadrantCanvas {
      width: 100%;
      max-width: 420px;
      height: 260px;
      border-radius: 12px;
      background: #f9fafb;
      border: 1px solid #e5e7eb;
    }

    .summary-card {
      background: #111827;
      color: #f9fafb;
      border-radius: 14px;
      padding: 10px 12px;
      font-size: 12px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      min-height: 120px;
    }

    .summary-zone {
      font-weight: 600;
      font-size: 13px;
    }

    .summary-body {
      color: #e5e7eb;
    }

    .summary-actions {
      font-size: 11px;
      color: #cbd5f5;
    }

    /* Admin */
    .admin-list {
      margin-top: 8px;
      border-radius: 12px;
      border: 1px solid var(--border-subtle);
      overflow: hidden;
    }

    .admin-row {
      padding: 8px 10px;
      display: grid;
      grid-template-columns: minmax(0, 2fr) 1.1fr auto;
      gap: 8px;
      align-items: center;
      font-size: 12px;
      background: #ffffff;
    }

    .admin-row:nth-child(even) {
      background: #f9fafb;
    }

    .admin-main {
      min-width: 0;
    }

    .admin-name {
      font-weight: 500;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .admin-desc {
      font-size: 11px;
      color: var(--text-muted);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      margin-top: 2px;
    }

    .admin-date {
      font-size: 11px;
      color: #4b5563;
    }

    .admin-actions {
      display: flex;
      gap: 6px;
      justify-content: flex-end;
    }

    .admin-empty {
      font-size: 12px;
      color: var(--text-muted);
      padding: 10px;
      text-align: center;
      background: #fafafa;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .main-card {
        padding: 12px 12px 16px 12px;
      }

      .tab-bar-row {
        flex-direction: column;
        align-items: flex-start;
      }

      .deal-info-grid {
        grid-template-columns: 1fr;
      }

      .grid-two {
        grid-template-columns: 1fr;
      }

      .dashboard-grid {
        grid-template-columns: 1fr;
      }

      canvas#quadrantCanvas {
        height: 220px;
      }

      .admin-row {
        grid-template-columns: minmax(0, 1.5fr) 1.1fr;
        grid-template-rows: auto auto;
      }

      .admin-actions {
        grid-column: 1 / -1;
        justify-content: flex-start;
      }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <header class="app-header">
      <div class="app-title">
        <div class="logo-pill">DQ</div>
        <div>
          <h1>Deal Qualification Tool</h1>
          <span>Business Â· Technical Fit ê¸°ë°˜ Deal í‰ê°€</span>
        </div>
      </div>
      <div class="header-meta">
        <div class="badge">
          <span class="badge-dot"></span>
          Live Scoring
        </div>
        <div class="badge">
          <span>Local Storage</span> Â· <span>Single-page</span>
        </div>
      </div>
    </header>

    <main class="main-card">
      <div class="tab-bar-row">
        <div class="tabs" role="tablist">
          <button class="tab-button active" data-tab="qualification" role="tab"
            aria-selected="true">
            <span class="icon">ğŸ“Š</span>
            Deal Qualification
          </button>
          <button class="tab-button" data-tab="admin" role="tab"
            aria-selected="false">
            <span class="icon">ğŸ—‚ï¸</span>
            Admin
          </button>
        </div>
        <div class="start-area">
          <button class="btn-primary" id="startDealButton">
            â–¶ Start
          </button>
          <span>ìƒˆ Dealì„ ì…ë ¥í•˜ê³  ë‹¨ê³„ë³„ë¡œ í‰ê°€ë¥¼ ì§„í–‰í•˜ì„¸ìš”.</span>
        </div>
      </div>

      <div class="content">
        <!-- Deal Qualification Tab -->
        <section class="section" id="tab-qualification">
          <!-- Deal Info -->
          <div class="section-card" id="dealInfoSection">
            <div class="section-header">
              <div>
                <div class="section-title">
                  <span>Deal ì •ë³´</span>
                  <span class="pill-muted">ê¸°ë³¸ ì •ë³´</span>
                </div>
                <div class="section-subtitle">
                  í‰ê°€ì— ì‚¬ìš©í•  Deal ì´ë¦„ê³¼ ê°„ë‹¨í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”.
                </div>
              </div>
            </div>
            <div class="section-body">
              <div class="deal-info-grid">
                <div>
                  <div class="form-field">
                    <div class="form-label">
                      Deal Name
                      <span class="required-dot"></span>
                    </div>
                    <input type="text" id="dealNameInput"
                      placeholder="ì˜ˆ: ABCì€í–‰ ì°¨ì„¸ëŒ€ ë°ì´í„° í”Œë«í¼" />
                    <div class="error-text" id="dealNameError"
                      style="display:none;">
                      Deal Nameì€ í•„ìˆ˜ì…ë‹ˆë‹¤.
                    </div>
                  </div>
                  <div class="form-field">
                    <div class="form-label">
                      Deal Description
                      <span style="font-size:11px;color:var(--text-muted);">(ì„ íƒ)</span>
                    </div>
                    <textarea id="dealDescriptionInput"
                      placeholder="ê°„ë‹¨í•œ ë°°ê²½, ì£¼ìš” ì´í•´ê´€ê³„ì, ë²”ìœ„ ë“±ì„ ì ì–´ë‘ë©´ ì¢‹ìŠµë‹ˆë‹¤."></textarea>
                  </div>
                </div>
                <div>
                  <div class="helper-text">
                    ì´ ì •ë³´ëŠ” Dashboardì™€ Admin ë¦¬ìŠ¤íŠ¸ì—ì„œ Dealì„ ì‹ë³„í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.
                    <br />ì…ë ¥ í›„ <b>Start</b>ë¥¼ ëˆ„ë¥´ë©´ BANT ê¸°ë°˜ Deal Win Score í‰ê°€ë¡œ
                    ì§„í–‰ë©ë‹ˆë‹¤.
                  </div>
                </div>
              </div>
              <div class="form-footer">
                <button class="btn-secondary" id="dealInfoCompleteButton">
                  Start
                </button>
              </div>
            </div>
          </div>

          <!-- Deal Win Score Section -->
          <div class="section-card" id="dealWinSection" style="display:none;">
            <div class="section-header">
              <div>
                <div class="section-title">
                  <span>BANT ê¸°ë°˜ Deal Win Score</span>
                  <span class="pill-muted">Business Fit</span>
                </div>
                <div class="section-subtitle">
                  Budget / Authority / Need / Timeline ê´€ì ì—ì„œ ìˆ˜ì£¼ ê°€ëŠ¥ì„±ì„
                  ì •ëŸ‰í™”í•©ë‹ˆë‹¤.
                </div>
              </div>
              <button class="collapse-toggle" data-target="dealWinSectionBody">
                <span>ì ‘ê¸°</span> â–²
              </button>
            </div>
            <div class="section-body" id="dealWinSectionBody">
              <div class="grid-two">
                <div>
                  <table class="score-table">
                    <caption>
                      ê° í•­ëª©ì— 1~5 ì ì„ ë¶€ì—¬í•˜ì„¸ìš”. (5ì ì´ ê°€ì¥ ìš°ìˆ˜)
                    </caption>
                    <thead>
                      <tr>
                        <th style="width:40%;">Deal í•­ëª©</th>
                        <th style="width:40%;">ì„¸ë¶€ í•­ëª©</th>
                        <th style="width:10%;">ì ìˆ˜</th>
                        <th style="width:10%;text-align:center;">i</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr class="group-row">
                        <td>Budget</td>
                        <td colspan="3">ì˜ˆì‚° ë° êµ¬ë§¤ ì¤€ë¹„ë„</td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ì˜ˆì‚° ë° êµ¬ë§¤ ì¤€ë¹„ë„</td>
                        <td>
                          <select data-dw-score="budgetReadiness">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td style="text-align:center;">
                          <div class="info-icon"
                            data-tooltip-id="tt-budget-readiness">i
                            <div class="tooltip" id="tt-budget-readiness">
                              <div class="tooltip-title">Budget Â· ì˜ˆì‚° ë° êµ¬ë§¤
                                ì¤€ë¹„ë„</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì˜ˆì‚° í™•ì •
                                / ìŠ¹ì¸ê¶Œì ë™ì˜ / êµ¬ë§¤ ì ˆì°¨ ëª…í™•</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ì˜ˆì‚°
                                ê°€ëŠ¥í•˜ë‚˜ ìŠ¹ì¸ í•„ìš” / ê°€ê²© ë¯¼ê° / ë¶ˆí™•ì‹¤</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ì˜ˆì‚° ì—†ìŒ
                                / ìŠ¹ì¸ ì˜ì‚¬ ì—†ìŒ</div>
                            </div>
                          </div>
                        </td>
                      </tr>

                      <tr class="group-row">
                        <td>Authority</td>
                        <td colspan="3">ë‚´ë¶€ ì§€ì§€ì íŒŒì›Œ &amp; ì˜ì‚¬ê²°ì •ê¶Œì
                          ì ‘ê·¼ì„±</td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ë‚´ë¶€ ì§€ì§€ì íŒŒì›Œ</td>
                        <td>
                          <select data-dw-score="authorityChampion">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td style="text-align:center;">
                          <div class="info-icon"
                            data-tooltip-id="tt-authority-champion">i
                            <div class="tooltip" id="tt-authority-champion">
                              <div class="tooltip-title">Authority Â· ë‚´ë¶€ ì§€ì§€ì
                                íŒŒì›Œ</div>
                              <div class="tooltip-line"><span>5ì </span> Â· íŒŒì›Œ
                                ì±”í”¼ì–¸ / ì ê·¹ì  ì§€ì§€ / ë‚´ë¶€ ì¶”ì§„ ê°•í•¨</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ì‹¤ë¬´
                                ë¦¬ë”ê¸‰ ì±”í”¼ì–¸ / ë‚´ë¶€ ë…¼ì˜ ì£¼ë„ ê°€ëŠ¥</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ì±”í”¼ì–¸
                                ì—†ìŒ / ë‹¨ìˆœ ê´€ì‹¬ì</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ì˜ì‚¬ê²°ì •ê¶Œì ì ‘ê·¼ì„±</td>
                        <td>
                          <select data-dw-score="authorityAccess">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td style="text-align:center;">
                          <div class="info-icon"
                            data-tooltip-id="tt-authority-access">i
                            <div class="tooltip" id="tt-authority-access">
                              <div class="tooltip-title">Authority Â· ì˜ì‚¬ê²°ì •ê¶Œì
                                ì ‘ê·¼ì„±</div>
                              <div class="tooltip-line"><span>5ì </span> Â· EBì™€
                                ì§ì ‘ ëŒ€í™” / ë‹ˆì¦ˆÂ·ìš°ì„ ìˆœìœ„ í™•ì¸ë¨</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ì˜ì‚¬ê²°ì •
                                êµ¬ì¡° íŒŒì•… / EB ì ‘ì´‰ ê°€ëŠ¥ì„± ì¡´ì¬</div>
                              <div class="tooltip-line"><span>1ì </span> Â· EBê°€
                                ëˆ„êµ¬ì¸ì§€ ëª¨ë¦„ / ì ‘ê·¼ ë¶ˆê°€</div>
                            </div>
                          </div>
                        </td>
                      </tr>

                      <tr class="group-row">
                        <td>Need</td>
                        <td colspan="3">ë¬¸ì œ ì í•©ì„± &amp; ê²½ìŸ êµ¬ë„</td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ë¬¸ì œ ì í•©ì„±</td>
                        <td>
                          <select data-dw-score="needFit">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td style="text-align:center;">
                          <div class="info-icon" data-tooltip-id="tt-need-fit">i
                            <div class="tooltip" id="tt-need-fit">
                              <div class="tooltip-title">Need Â· ë¬¸ì œ ì í•©ì„±</div>
                              <div class="tooltip-line"><span>5ì </span> Â· í•µì‹¬
                                Pain / ìš°ë¦¬ ì†”ë£¨ì…˜ì´ ê°€ì¥ ì í•©</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ë¬¸ì œ
                                ëª…í™• / ì†”ë£¨ì…˜ìœ¼ë¡œ í•´ê²° ê°€ëŠ¥</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ë¬¸ì œ
                                ëª¨í˜¸ / ì†”ë£¨ì…˜ê³¼ ì—°ê²° ì•½í•¨</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ê²½ìŸ êµ¬ë„</td>
                        <td>
                          <select data-dw-score="needCompetition">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td style="text-align:center;">
                          <div class="info-icon"
                            data-tooltip-id="tt-need-competition">i
                            <div class="tooltip" id="tt-need-competition">
                              <div class="tooltip-title">Need Â· ê²½ìŸ êµ¬ë„</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì‚¬ì‹¤ìƒ
                                ìš°ë¦¬ ì„ íƒ / PoC ì‹œ í™•ì • ìˆ˜ì¤€</div>
                              <div class="tooltip-line"><span>3ì </span> Â·
                                ë¹„ìŠ·ë¹„ìŠ· / ë¹„êµ ì´ˆê¸°</div>
                              <div class="tooltip-line"><span>1ì </span> Â·
                                ê²½ìŸì‚¬ ìš°ìœ„ / ê³ ê° ì„ í˜¸ë„ ë‚®ìŒ</div>
                            </div>
                          </div>
                        </td>
                      </tr>

                      <tr class="group-row">
                        <td>Timeline</td>
                        <td colspan="3">ì‹œê¸‰ì„±/íƒ€ì´ë° &amp; ë„ì… ìš©ì´ì„±</td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ì‹œê¸‰ì„±/íƒ€ì´ë°</td>
                        <td>
                          <select data-dw-score="timelineUrgency">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td style="text-align:center;">
                          <div class="info-icon"
                            data-tooltip-id="tt-timeline-urgency">i
                            <div class="tooltip" id="tt-timeline-urgency">
                              <div class="tooltip-title">Timeline Â·
                                ì‹œê¸‰ì„±/íƒ€ì´ë°</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì¦‰ì‹œ
                                í•„ìš” / ê³„ì•½Â·ê·œì œ ë“± ê¸´ê¸‰ ì‚¬ìœ </div>
                              <div class="tooltip-line"><span>3ì </span> Â· ë¶„ê¸°
                                ë‚´ ê²€í†  í•„ìš” / ì¼ì • ì¼ë¶€ ì¡´ì¬</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ê¸‰í•˜ì§€
                                ì•ŠìŒ / ê³„íš ì—†ìŒ</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ë„ì… ìš©ì´ì„±</td>
                        <td>
                          <select data-dw-score="timelineEase">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td style="text-align:center;">
                          <div class="info-icon"
                            data-tooltip-id="tt-timeline-ease">i
                            <div class="tooltip" id="tt-timeline-ease">
                              <div class="tooltip-title">Timeline Â· ë„ì…
                                ìš©ì´ì„±</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì¦‰ì‹œ
                                ì‚¬ìš© ê°€ëŠ¥ / ë¦¬ìŠ¤í¬ ê±°ì˜ ì—†ìŒ</div>
                              <div class="tooltip-line"><span>3ì </span> Â·
                                ì¼ë°˜ì  ë‚œì´ë„ / ë³´í†µ ìˆ˜ì¤€</div>
                              <div class="tooltip-line"><span>1ì </span> Â·
                                ê¸°ìˆ ì  ì¥ì•  í¼ / í†µí•© ì–´ë ¤ì›€</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div>
                  <div class="weight-card">
                    <div class="weight-card-header">
                      <div class="weight-card-title">ê°€ì¤‘ì¹˜ ì„¤ì •</div>
                      <span class="pill-muted">í•©ê³„ = 1.00</span>
                    </div>
                    <div class="weight-row">
                      <span>Budget</span>
                      <input type="number" step="0.01" class="weight-input"
                        id="dwWeightBudget" value="0.30" />
                    </div>
                    <div class="weight-row">
                      <span>Need</span>
                      <input type="number" step="0.01" class="weight-input"
                        id="dwWeightNeed" value="0.30" />
                    </div>
                    <div class="weight-row">
                      <span>Authority</span>
                      <input type="number" step="0.01" class="weight-input"
                        id="dwWeightAuthority" value="0.25" />
                    </div>
                    <div class="weight-row">
                      <span>Timeline</span>
                      <input type="number" step="0.01" class="weight-input"
                        id="dwWeightTimeline" value="0.15" />
                    </div>
                    <div id="dwWeightSumText" class="weight-sum">
                      í•©ê³„: 1.00
                    </div>
                    <div class="helper-text">
                      í•©ê³„ê°€ 1ì´ ì•„ë‹ ê²½ìš° ê²°ê³¼ ê³„ì‚°ì´ ë¹„í™œì„±í™”ë©ë‹ˆë‹¤.
                    </div>
                  </div>
                </div>
              </div>

              <div class="section-footer">
                <div class="helper-text">
                  ëª¨ë“  í•­ëª©ì˜ ì ìˆ˜ì™€ ê°€ì¤‘ì¹˜ë¥¼ ì„¤ì •í•œ ë’¤, ê²°ê³¼ ë³´ê¸°ë¥¼ ëˆŒëŸ¬
                  Deal Scoreì™€ Win Probabilityë¥¼ í™•ì¸í•˜ì„¸ìš”.
                </div>
                <div>
                  <button class="btn-secondary" id="dealWinResultButton">
                    ê²°ê³¼ ë³´ê¸°
                  </button>
                </div>
              </div>

              <div id="dealWinResultArea" style="display:none;">
                <div class="result-summary">
                  <div class="result-pill">
                    <div>
                      <div class="result-label">Deal Score</div>
                      <div id="dealScoreValue">-</div>
                    </div>
                    <div>
                      <div class="result-label">Win Probability</div>
                      <div id="winProbValue">-</div>
                    </div>
                  </div>
                </div>
                <div class="risk-card">
                  <div class="risk-card-header">
                    <div class="risk-card-title">Risk Summary</div>
                    <span class="risk-chip">í•©ì‚° ì ìˆ˜ 2 ì´í•˜ í•­ëª©</span>
                  </div>
                  <ul class="risk-list" id="dealWinRiskList"></ul>
                </div>
              </div>
            </div>
          </div>

          <!-- Technical Fit Score Section -->
          <div class="section-card" id="techFitSection" style="display:none;">
            <div class="section-header">
              <div>
                <div class="section-title">
                  <span>Technical Fit Score</span>
                  <span class="pill-muted">Technical Risk</span>
                </div>
                <div class="section-subtitle">
                  ê¸°ëŠ¥, ì¸í”„ë¼, ê·œì œ/ë³´ì•ˆ, ì‹¤í–‰ ê°€ëŠ¥ì„± ê´€ì ì—ì„œ ê¸°ìˆ ì  ë¦¬ìŠ¤í¬ë¥¼
                  í‰ê°€í•©ë‹ˆë‹¤.
                </div>
              </div>
              <button class="collapse-toggle"
                data-target="techFitSectionBody">
                <span>ì ‘ê¸°</span> â–²
              </button>
            </div>
            <div class="section-body" id="techFitSectionBody">
              <div class="grid-two">
                <div>
                  <table class="score-table">
                    <caption>
                      ê° ì í•©ì„± í•­ëª©ì— 1~5 ì ì„ ë¶€ì—¬í•˜ì„¸ìš”. (5ì ì´ ê°€ì¥
                      ì í•©)
                    </caption>
                    <thead>
                      <tr>
                        <th style="width:40%;">ì í•©ì„± í•­ëª©</th>
                        <th style="width:40%;">ì„¸ë¶€ í•­ëª©</th>
                        <th style="width:10%;">ì ìˆ˜</th>
                        <th style="width:10%;text-align:center;">i</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr class="group-row">
                        <td>Technical Fit</td>
                        <td colspan="3">ê¸°ëŠ¥ ì í•©ì„± / ì»¤ìŠ¤í„°ë§ˆì´ì§• / ë ˆê±°ì‹œ</td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ê¸°ëŠ¥ ì í•©ì„±</td>
                        <td>
                          <select data-tf-score="tfFunctional">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td style="text-align:center;">
                          <div class="info-icon"
                            data-tooltip-id="tt-tf-functional">i
                            <div class="tooltip" id="tt-tf-functional">
                              <div class="tooltip-title">Technical Fit Â· ê¸°ëŠ¥
                                ì í•©ì„±</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ìš”êµ¬ì‚¬í•­
                                ì™„ì „ ì¼ì¹˜ / ìµœì  Fit</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ì£¼ìš”
                                ê¸°ëŠ¥ ëŒ€ë¶€ë¶„ ì¶©ì¡± / ë³´í†µ ìˆ˜ì¤€</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ìš”êµ¬
                                ê¸°ëŠ¥ ëŒ€ë¶€ë¶„ ë¶ˆì¼ì¹˜ / êµ¬í˜„ ì–´ë ¤ì›€</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ì»¤ìŠ¤í„°ë§ˆì´ì§• í•„ìš”ë„</td>
                        <td>
                          <select data-tf-score="tfCustomization">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td style="text-align:center;">
                          <div class="info-icon"
                            data-tooltip-id="tt-tf-customization">i
                            <div class="tooltip" id="tt-tf-customization">
                              <div class="tooltip-title">Technical Fit Â·
                                ì»¤ìŠ¤í„°ë§ˆì´ì§• í•„ìš”ë„</div>
                              <div class="tooltip-line"><span>5ì </span> Â·
                                êµ¬ì„±ë§Œìœ¼ë¡œ ì¦‰ì‹œ ì ìš© ê°€ëŠ¥</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ì¼ë°˜ì 
                                ë‚œì´ë„ / êµ¬í˜„ ê°€ëŠ¥</div>
                              <div class="tooltip-line"><span>1ì </span> Â·
                                ì»¤ìŠ¤í„°ë§ˆì´ì§• ë§ìŒ / ë†’ì€ ë³µì¡ë„</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ë ˆê±°ì‹œ ì œì•½</td>
                        <td>
                          <select data-tf-score="tfLegacy">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td style="text-align:center;">
                          <div class="info-icon"
                            data-tooltip-id="tt-tf-legacy">i
                            <div class="tooltip" id="tt-tf-legacy">
                              <div class="tooltip-title">Technical Fit Â· ë ˆê±°ì‹œ
                                ì œì•½</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì œì•½ ê±°ì˜
                                ì—†ìŒ / ìµœì  í™˜ê²½</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ì¼ë¶€
                                ì œì•½ ìˆìœ¼ë‚˜ í˜„ì‹¤ì  ëŒ€ì•ˆ ì¡´ì¬</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ë ˆê±°ì‹œ
                                ì œì•½ ì‹¬ê° / ì—°ë™ ë¶ˆê°€</div>
                            </div>
                          </div>
                        </td>
                      </tr>

                      <tr class="group-row">
                        <td>Environment &amp; Integration</td>
                        <td colspan="3">ì¸í”„ë¼ / ì—°ë™ / ë„¤íŠ¸ì›Œí¬ ì œì•½</td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ì¸í”„ë¼ í˜¸í™˜ì„±</td>
                        <td>
                          <select data-tf-score="envInfra">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td style="text-align:center;">
                          <div class="info-icon"
                            data-tooltip-id="tt-env-infra">i
                            <div class="tooltip" id="tt-env-infra">
                              <div class="tooltip-title">Environment Â· ì¸í”„ë¼
                                í˜¸í™˜ì„±</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì™„ì „
                                í˜¸í™˜ / ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ë³´í†µ
                                ìˆ˜ì¤€ í˜¸í™˜ / ì¼ë¶€ ê²€ì¦ í•„ìš”</div>
                              <div class="tooltip-line"><span>1ì </span> Â· í˜¸í™˜
                                ê±°ì˜ ë¶ˆê°€ / ì œì•½ ë§¤ìš° í¼</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ì—°ë™ ì§€ì› ì—¬ë¶€</td>
                        <td>
                          <select data-tf-score="envIntegration">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td style="text-align:center;">
                          <div class="info-icon"
                            data-tooltip-id="tt-env-integration">i
                            <div class="tooltip" id="tt-env-integration">
                              <div class="tooltip-title">Environment Â· ì—°ë™ ì§€ì›
                                ì—¬ë¶€</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì¦‰ì‹œ
                                ì—°ë™ ê°€ëŠ¥ / ì¥ì•  ìš”ì†Œ ì—†ìŒ</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ì¼ë°˜ì 
                                ë‚œì´ë„ / í‘œì¤€ í”„ë¡œí† ì½œ ê¸°ë°˜</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ì—°ë™
                                ë¶ˆê°€ í˜¹ì€ ë§¤ìš° ì–´ë ¤ì›€</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>í™˜ê²½/ë„¤íŠ¸ì›Œí¬ ì œì•½</td>
                        <td>
                          <select data-tf-score="envNetwork">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td style="text-align:center;">
                          <div class="info-icon"
                            data-tooltip-id="tt-env-network">i
                            <div class="tooltip" id="tt-env-network">
                              <div class="tooltip-title">Environment Â· í™˜ê²½ /
                                ë„¤íŠ¸ì›Œí¬ ì œì•½</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì œì•½ ê±°ì˜
                                ì—†ìŒ / ìµœì  í™˜ê²½</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ì¼ë¶€
                                ì œì•½ ìˆìœ¼ë‚˜ ê´€ë¦¬ ê°€ëŠ¥</div>
                              <div class="tooltip-line"><span>1ì </span> Â·
                                ì œì•½ ë§¤ìš° ì‹¬ê°</div>
                            </div>
                          </div>
                        </td>
                      </tr>

                      <tr class="group-row">
                        <td>Compliance &amp; Security</td>
                        <td colspan="3">ë³´ì•ˆ / ê·œì œ / ë°ì´í„°Â·ë³´ì•ˆ ì í•©ì„±</td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ë³´ì•ˆ ê²€í†  ë‚œì´ë„</td>
                        <td>
                          <select data-tf-score="compSecurity">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td style="text-align:center;">
                          <div class="info-icon"
                            data-tooltip-id="tt-comp-security">i
                            <div class="tooltip" id="tt-comp-security">
                              <div class="tooltip-title">Compliance Â· ë³´ì•ˆ ê²€í† 
                                ë‚œì´ë„</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ë¬¸ì œ
                                ì—†ìŒ / ìŠ¹ì¸ í™•ì‹¤</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ë³´í†µ
                                ë‚œì´ë„ / ì¼ë¶€ ê²€í†  í•„ìš”</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ë³´ì•ˆ
                                ì¶©ì¡± ì–´ë ¤ì›€ / ë¦¬ìŠ¤í¬ í¼</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ê·œì œ ì¤€ìˆ˜ ê°€ëŠ¥ì„±</td>
                        <td>
                          <select data-tf-score="compRegulatory">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td style="text-align:center;">
                          <div class="info-icon"
                            data-tooltip-id="tt-comp-reg">i
                            <div class="tooltip" id="tt-comp-reg">
                              <div class="tooltip-title">Compliance Â· ê·œì œ ì¤€ìˆ˜
                                ê°€ëŠ¥ì„±</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì™„ì „
                                ì¶©ì¡± / ê²€ì¦ ë¬¸ì œ ì—†ìŒ</div>
                              <div class="tooltip-line"><span>3ì </span> Â·
                                ëŒ€ë¶€ë¶„ ì¶©ì¡± / ì¶”ê°€ ì¡°ì • í•„ìš”</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ê·œì œ
                                ì¶©ì¡± ë¶ˆê°€</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ë°ì´í„°/ë³´ì•ˆ ì í•©ì„±</td>
                        <td>
                          <select data-tf-score="compData">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td style="text-align:center;">
                          <div class="info-icon"
                            data-tooltip-id="tt-comp-data">i
                            <div class="tooltip" id="tt-comp-data">
                              <div class="tooltip-title">Compliance Â· ë°ì´í„°/ë³´ì•ˆ
                                ì í•©ì„±</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì™„ì „
                                ì í•© / ìš”êµ¬ ì¶©ì¡±</div>
                              <div class="tooltip-line"><span>3ì </span> Â·
                                ëŒ€ë¶€ë¶„ ì¶©ì¡± / ì¡°ì • ê°€ëŠ¥</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ìš”êµ¬
                                ê¸°ì¤€ê³¼ ë¶ˆì¼ì¹˜</div>
                            </div>
                          </div>
                        </td>
                      </tr>

                      <tr class="group-row">
                        <td>Human &amp; Execution Readiness</td>
                        <td colspan="3">ê³ ê° ê¸°ìˆ íŒ€ / ì§€ì› ë¦¬ì†ŒìŠ¤ / ì¼ì • í˜„ì‹¤ì„±</td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ê³ ê° ê¸°ìˆ íŒ€ ì¤€ë¹„ë„</td>
                        <td>
                          <select data-tf-score="humanTeam">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td style="text-align:center;">
                          <div class="info-icon"
                            data-tooltip-id="tt-human-team">i
                            <div class="tooltip" id="tt-human-team">
                              <div class="tooltip-title">Human Â· ê³ ê° ê¸°ìˆ íŒ€
                                ì¤€ë¹„ë„</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ë§¤ìš°
                                ì ê·¹ì  / ì „ë¬¸ì„± ë†’ìŒ</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ê¸°ë³¸
                                ì—­ëŸ‰ ì¶©ë¶„ / ì¼ë°˜ì  ìˆ˜í–‰ ê°€ëŠ¥</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ë¦¬ì†ŒìŠ¤
                                ì—†ìŒ / ì§„í–‰ ë¶ˆê°€</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ë„ì… ì§€ì› ë¦¬ì†ŒìŠ¤</td>
                        <td>
                          <select data-tf-score="humanSupport">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td style="text-align:center;">
                          <div class="info-icon"
                            data-tooltip-id="tt-human-support">i
                            <div class="tooltip" id="tt-human-support">
                              <div class="tooltip-title">Human Â· ë„ì… ì§€ì›
                                ë¦¬ì†ŒìŠ¤</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì¦‰ì‹œ
                                íˆ¬ì… ê°€ëŠ¥ / ì—¬ìœ  ìˆìŒ</div>
                              <div class="tooltip-line"><span>3ì </span> Â·
                                ì¼ë°˜ì  ìˆ˜ì¤€ / ì¼ë¶€ ì¡°ìœ¨ í•„ìš”</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ì§€ì›
                                ë¦¬ì†ŒìŠ¤ ê±°ì˜ ì—†ìŒ</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td>ì¼ì •/ë²”ìœ„ í˜„ì‹¤ì„±</td>
                        <td>
                          <select data-tf-score="humanTimeline">
                            <option value="">-</option>
                            <option value="5">5</option>
                            <option value="4">4</option>
                            <option value="3">3</option>
                            <option value="2">2</option>
                            <option value="1">1</option>
                          </select>
                        </td>
                        <td style="text-align:center;">
                          <div class="info-icon"
                            data-tooltip-id="tt-human-timeline">i
                            <div class="tooltip" id="tt-human-timeline">
                              <div class="tooltip-title">Human Â· ì¼ì •/ë²”ìœ„
                                í˜„ì‹¤ì„±</div>
                              <div class="tooltip-line"><span>5ì </span> Â· ì¦‰ì‹œ
                                ì°©ìˆ˜ ê°€ëŠ¥ / ê°•í•œ ì¶”ì§„ë ¥</div>
                              <div class="tooltip-line"><span>3ì </span> Â· ì¼ì •
                                ì¡´ì¬ / ë³€ë™ ê°€ëŠ¥ì„± ìˆìŒ</div>
                              <div class="tooltip-line"><span>1ì </span> Â· ì¼ì •
                                ë¶ˆëª…í™• / ì‹¤í˜„ ì–´ë ¤ì›€</div>
                            </div>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div>
                  <div class="weight-card">
                    <div class="weight-card-header">
                      <div class="weight-card-title">ê°€ì¤‘ì¹˜ ì„¤ì •</div>
                      <span class="pill-muted">í•©ê³„ = 1.00</span>
                    </div>
                    <div class="weight-row">
                      <span>Technical Fit</span>
                      <input type="number" step="0.01" class="weight-input"
                        id="tfWeightTechnicalFit" value="0.35" />
                    </div>
                    <div class="weight-row">
                      <span>Environment &amp; Integration</span>
                      <input type="number" step="0.01" class="weight-input"
                        id="tfWeightEnvironment" value="0.25" />
                    </div>
                    <div class="weight-row">
                      <span>Compliance &amp; Security</span>
                      <input type="number" step="0.01" class="weight-input"
                        id="tfWeightCompliance" value="0.20" />
                    </div>
                    <div class="weight-row">
                      <span>Human &amp; Execution</span>
                      <input type="number" step="0.01" class="weight-input"
                        id="tfWeightHuman" value="0.20" />
                    </div>
                    <div id="tfWeightSumText" class="weight-sum">
                      í•©ê³„: 1.00
                    </div>
                    <div class="helper-text">
                      í•©ê³„ê°€ 1ì´ ì•„ë‹ ê²½ìš° ê²°ê³¼ ê³„ì‚°ì´ ë¹„í™œì„±í™”ë©ë‹ˆë‹¤.
                    </div>
                  </div>
                </div>
              </div>

              <div class="section-footer">
                <div class="helper-text">
                  ëª¨ë“  ì í•©ì„± í•­ëª©ê³¼ ê°€ì¤‘ì¹˜ë¥¼ ì„¤ì •í•œ ë’¤, ê²°ê³¼ ë³´ê¸°ë¥¼ ëˆŒëŸ¬ Technical Fit
                  Scoreì™€ Risk Levelì„ í™•ì¸í•˜ì„¸ìš”.
                </div>
                <div>
                  <button class="btn-secondary" id="techFitResultButton">
                    ê²°ê³¼ ë³´ê¸°
                  </button>
                </div>
              </div>

              <div id="techFitResultArea" style="display:none;">
                <div class="result-summary">
                  <div class="result-pill">
                    <div>
                      <div class="result-label">Technical Fit Score</div>
                      <div id="techScoreValue">-</div>
                    </div>
                    <div>
                      <div class="result-label">Risk Level</div>
                      <div id="techRiskValue">-</div>
                    </div>
                  </div>
                </div>
                <div class="risk-card">
                  <div class="risk-card-header">
                    <div class="risk-card-title">Risk Summary</div>
                    <span class="risk-chip">í•©ì‚° ì ìˆ˜ 2 ì´í•˜ í•­ëª©</span>
                  </div>
                  <ul class="risk-list" id="techFitRiskList"></ul>
                </div>
              </div>
            </div>
          </div>

          <!-- Dashboard Section -->
          <div class="section-card" id="dashboardSection" style="display:none;">
            <div class="section-header">
              <div>
                <div class="section-title">
                  <span>Dashboard</span>
                  <span class="pill-muted">Quadrant View</span>
                </div>
                <div class="section-subtitle">
                  Business Fit (Deal Win Score)ì™€ Technical Fitì„ í•œ ëˆˆì— ë¹„êµí•©ë‹ˆë‹¤.
                </div>
              </div>
            </div>
            <div class="section-body">
              <div class="metrics-row">
                <div class="metric-card">
                  <div class="metric-label">Deal Name</div>
                  <div class="metric-value" id="dashDealName">-</div>
                  <div class="metric-sub" id="dashDealDesc">-</div>
                </div>
                <div class="metric-card">
                  <div class="metric-label">Deal Score (Business)</div>
                  <div class="metric-value" id="dashDealScore">-</div>
                  <div class="metric-sub" id="dashWinProb">Win Probability: -</div>
                </div>
                <div class="metric-card">
                  <div class="metric-label">Technical Fit Score</div>
                  <div class="metric-value" id="dashTechScore">-</div>
                  <div class="metric-sub" id="dashTechRisk">Risk Level: -</div>
                </div>
              </div>

              <div class="dashboard-grid">
                <div class="quadrant-card">
                  <div class="quadrant-header">
                    <span>Business vs Technical Fit</span>
                    <span style="font-size:11px;color:var(--text-muted);">
                      X: Business Fit Â· Y: Technical Fit
                    </span>
                  </div>
                  <canvas id="quadrantCanvas"></canvas>
                </div>
                <div class="summary-card">
                  <div class="summary-zone" id="dashZoneTitle">-</div>
                  <div class="summary-body" id="dashZoneBody">
                    Deal ë° Technical ì ìˆ˜ë¥¼ ê³„ì‚°í•˜ë©´, ì—¬ê¸°ì— ìœ„ì¹˜ì™€ í•´ì„ì´ í‘œì‹œë©ë‹ˆë‹¤.
                  </div>
                  <div class="summary-actions" id="dashZoneActions">
                    Recommended actions will appear here.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Admin Tab -->
        <section class="section" id="tab-admin" style="display:none;">
          <div class="section-card">
            <div class="section-header">
              <div>
                <div class="section-title">
                  <span>Admin</span>
                  <span class="pill-muted">Saved Deals</span>
                </div>
                <div class="section-subtitle">
                  ì™„ì„±ëœ Dealì˜ Business / Technical Scoreë¥¼ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•˜ê³  ë‹¤ì‹œ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </div>
              </div>
            </div>
            <div class="section-body">
              <div id="adminList" class="admin-list">
                <div class="admin-empty" id="adminEmpty">
                  ì•„ì§ ì €ì¥ëœ Dealì´ ì—†ìŠµë‹ˆë‹¤. Deal í‰ê°€ë¥¼ ì™„ë£Œí•˜ë©´ ìë™ìœ¼ë¡œ ì´ê³³ì— ë‚˜íƒ€ë‚©ë‹ˆë‹¤.
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Tabs
      const tabButtons = document.querySelectorAll(".tab-button");
      const tabQualification = document.getElementById("tab-qualification");
      const tabAdmin = document.getElementById("tab-admin");

      function showTab(name) {
        if (name === "qualification") {
          tabQualification.style.display = "";
          tabAdmin.style.display = "none";
        } else {
          tabQualification.style.display = "none";
          tabAdmin.style.display = "";
          renderAdminList();
        }
        tabButtons.forEach(btn => {
          const active = btn.dataset.tab === name;
          btn.classList.toggle("active", active);
          btn.setAttribute("aria-selected", active ? "true" : "false");
        });
      }

      tabButtons.forEach(btn => {
        btn.addEventListener("click", () => {
          showTab(btn.dataset.tab);
        });
      });

      // Elements
      const startDealButton = document.getElementById("startDealButton");
      const dealInfoSection = document.getElementById("dealInfoSection");
      const dealWinSection = document.getElementById("dealWinSection");
      const techFitSection = document.getElementById("techFitSection");
      const dashboardSection = document.getElementById("dashboardSection");

      const dealNameInput = document.getElementById("dealNameInput");
      const dealDescriptionInput = document.getElementById("dealDescriptionInput");
      const dealNameError = document.getElementById("dealNameError");

      const dealInfoCompleteButton = document.getElementById("dealInfoCompleteButton");
      const dealWinResultButton = document.getElementById("dealWinResultButton");
      const techFitResultButton = document.getElementById("techFitResultButton");

      const dwWeightInputs = [
        { id: "dwWeightBudget", key: "budget" },
        { id: "dwWeightNeed", key: "need" },
        { id: "dwWeightAuthority", key: "authority" },
        { id: "dwWeightTimeline", key: "timeline" },
      ];
      const dwWeightSumText = document.getElementById("dwWeightSumText");

      const tfWeightInputs = [
        { id: "tfWeightTechnicalFit", key: "tech" },
        { id: "tfWeightEnvironment", key: "env" },
        { id: "tfWeightCompliance", key: "comp" },
        { id: "tfWeightHuman", key: "human" },
      ];
      const tfWeightSumText = document.getElementById("tfWeightSumText");

      const dealWinResultArea = document.getElementById("dealWinResultArea");
      const techFitResultArea = document.getElementById("techFitResultArea");

      const dealScoreValue = document.getElementById("dealScoreValue");
      const winProbValue = document.getElementById("winProbValue");
      const techScoreValue = document.getElementById("techScoreValue");
      const techRiskValue = document.getElementById("techRiskValue");

      const dealWinRiskList = document.getElementById("dealWinRiskList");
      const techFitRiskList = document.getElementById("techFitRiskList");

      // Dashboard elements
      const dashDealName = document.getElementById("dashDealName");
      const dashDealDesc = document.getElementById("dashDealDesc");
      const dashDealScore = document.getElementById("dashDealScore");
      const dashWinProb = document.getElementById("dashWinProb");
      const dashTechScore = document.getElementById("dashTechScore");
      const dashTechRisk = document.getElementById("dashTechRisk");
      const dashZoneTitle = document.getElementById("dashZoneTitle");
      const dashZoneBody = document.getElementById("dashZoneBody");
      const dashZoneActions = document.getElementById("dashZoneActions");

      const quadrantCanvas = document.getElementById("quadrantCanvas");

      // Admin
      const adminListEl = document.getElementById("adminList");
      const adminEmptyEl = document.getElementById("adminEmpty");

      let currentDeal = {
        name: "",
        description: "",
        dealScore: null,
        winProb: "",
        techScore: null,
        techRisk: "",
        createdAt: null,
      };

      // Tooltip hover
      document.querySelectorAll(".info-icon").forEach(icon => {
        const tooltipId = icon.dataset.tooltipId;
        const tooltip = tooltipId ? document.getElementById(tooltipId) : null;
        if (!tooltip) return;
        icon.addEventListener("mouseenter", () => {
          tooltip.classList.add("visible");
        });
        icon.addEventListener("mouseleave", () => {
          tooltip.classList.remove("visible");
        });
      });

      // Collapse toggles
      document.querySelectorAll(".collapse-toggle").forEach(btn => {
        const targetId = btn.dataset.target;
        const target = document.getElementById(targetId);
        if (!target) return;
        btn.addEventListener("click", () => {
          const collapsed = target.classList.toggle("collapsed");
          btn.innerHTML = collapsed ? "<span>í¼ì¹˜ê¸°</span> â–¼" : "<span>ì ‘ê¸°</span> â–²";
        });
      });

      // Weight sum helpers
      function updateWeightSum(weightDefs, sumEl) {
        let sum = 0;
        weightDefs.forEach(w => {
          const input = document.getElementById(w.id);
          const val = parseFloat(input.value);
          if (!isNaN(val)) sum += val;
        });
        const rounded = Math.round(sum * 100) / 100;
        sumEl.textContent = "í•©ê³„: " + rounded.toFixed(2);
        const ok = Math.abs(sum - 1) < 0.001;
        sumEl.classList.toggle("error", !ok);
        return ok;
      }

      dwWeightInputs.forEach(w => {
        const input = document.getElementById(w.id);
        input.addEventListener("input", () => updateWeightSum(dwWeightInputs, dwWeightSumText));
      });
      tfWeightInputs.forEach(w => {
        const input = document.getElementById(w.id);
        input.addEventListener("input", () => updateWeightSum(tfWeightInputs, tfWeightSumText));
      });

      updateWeightSum(dwWeightInputs, dwWeightSumText);
      updateWeightSum(tfWeightInputs, tfWeightSumText);

      // Start new deal (header Start ë²„íŠ¼)
      startDealButton.addEventListener("click", () => {
        resetForNewDeal();
        showTab("qualification");
        dealInfoSection.scrollIntoView({ behavior: "smooth", block: "start" });
      });

      // Deal info -> BANT
      dealInfoCompleteButton.addEventListener("click", () => {
        const name = dealNameInput.value.trim();
        if (!name) {
          dealNameError.style.display = "block";
          return;
        }
        dealNameError.style.display = "none";

        currentDeal.name = name;
        currentDeal.description = dealDescriptionInput.value.trim();

        dealWinSection.style.display = "";
        techFitSection.style.display = "none";
        dashboardSection.style.display = "none";

        dealWinSection.scrollIntoView({ behavior: "smooth", block: "start" });
      });

      function parseScore(select) {
        const v = parseInt(select.value, 10);
        return isNaN(v) ? null : v;
      }

      function avg(arr) {
        const nums = arr.filter(v => v !== null);
        if (!nums.length) return null;
        const s = nums.reduce((a, b) => a + b, 0);
        return s / nums.length;
      }

      function computeDealWinScore() {
        if (!updateWeightSum(dwWeightInputs, dwWeightSumText)) {
          alert("Deal Win Score ê°€ì¤‘ì¹˜ í•©ê³„ê°€ 1ì´ ì•„ë‹™ë‹ˆë‹¤.");
          return null;
        }

        const selects = document.querySelectorAll("[data-dw-score]");
        const scores = {};
        selects.forEach(sel => {
          scores[sel.dataset.dwScore] = parseScore(sel);
        });

        // ê·¸ë£¹ í‰ê· 
        const budgetAvg = scores.budgetReadiness ?? null;
        const authorityAvg = avg([scores.authorityChampion, scores.authorityAccess]);
        const needAvg = avg([scores.needFit, scores.needCompetition]);
        const timelineAvg = avg([scores.timelineUrgency, scores.timelineEase]);

        const groups = [
          { key: "Budget", avg: budgetAvg, weightId: "dwWeightBudget" },
          { key: "Authority", avg: authorityAvg, weightId: "dwWeightAuthority" },
          { key: "Need", avg: needAvg, weightId: "dwWeightNeed" },
          { key: "Timeline", avg: timelineAvg, weightId: "dwWeightTimeline" },
        ];

        if (groups.some(g => g.avg === null)) {
          alert("ëª¨ë“  Deal í•­ëª©ì— ì ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
          return null;
        }

        let score01 = 0;
        groups.forEach(g => {
          const w = parseFloat(document.getElementById(g.weightId).value) || 0;
          score01 += (g.avg / 5) * w;
        });
        const dealScore = Math.round(score01 * 100);

        let winProbText = "";
        if (dealScore >= 80) winProbText = "High";
        else if (dealScore >= 60) winProbText = "Medium";
        else if (dealScore >= 40) winProbText = "Low";
        else winProbText = "Very Low";

        // Risk list: í‰ê·  2 ì´í•˜ì¸ ì„¸ë¶€ í•­ëª©
        dealWinRiskList.innerHTML = "";
        const riskConfig = [
          { key: "budgetReadiness", label: "Budget Â· ì˜ˆì‚° ë° êµ¬ë§¤ ì¤€ë¹„ë„" },
          { key: "authorityChampion", label: "Authority Â· ë‚´ë¶€ ì§€ì§€ì íŒŒì›Œ" },
          { key: "authorityAccess", label: "Authority Â· ì˜ì‚¬ê²°ì •ê¶Œì ì ‘ê·¼ì„±" },
          { key: "needFit", label: "Need Â· ë¬¸ì œ ì í•©ì„±" },
          { key: "needCompetition", label: "Need Â· ê²½ìŸ êµ¬ë„" },
          { key: "timelineUrgency", label: "Timeline Â· ì‹œê¸‰ì„±/íƒ€ì´ë°" },
          { key: "timelineEase", label: "Timeline Â· ë„ì… ìš©ì´ì„±" },
        ];
        riskConfig.forEach(r => {
          const v = scores[r.key];
          if (v !== null && v <= 2) {
            const li = document.createElement("li");
            li.textContent = r.label + " (ì ìˆ˜ " + v + ")";
            dealWinRiskList.appendChild(li);
          }
        });
        if (!dealWinRiskList.children.length) {
          const li = document.createElement("li");
          li.textContent = "2ì  ì´í•˜ Risk í•­ëª© ì—†ìŒ.";
          dealWinRiskList.appendChild(li);
        }

        dealScoreValue.textContent = dealScore + " / 100";
        winProbValue.textContent = winProbText;
        dealWinResultArea.style.display = "";

        currentDeal.dealScore = dealScore;
        currentDeal.winProb = winProbText;

        // Technical Fit ì„¹ì…˜ í‘œì‹œ
        techFitSection.style.display = "";
        techFitSection.scrollIntoView({ behavior: "smooth", block: "start" });

        return dealScore;
      }

      function computeTechFitScore() {
        if (!updateWeightSum(tfWeightInputs, tfWeightSumText)) {
          alert("Technical Fit ê°€ì¤‘ì¹˜ í•©ê³„ê°€ 1ì´ ì•„ë‹™ë‹ˆë‹¤.");
          return null;
        }

        const selects = document.querySelectorAll("[data-tf-score]");
        const scores = {};
        selects.forEach(sel => {
          scores[sel.dataset.tfScore] = parseScore(sel);
        });

        const techAvg = avg([scores.tfFunctional, scores.tfCustomization, scores.tfLegacy]);
        const envAvg = avg([scores.envInfra, scores.envIntegration, scores.envNetwork]);
        const compAvg = avg([scores.compSecurity, scores.compRegulatory, scores.compData]);
        const humanAvg = avg([scores.humanTeam, scores.humanSupport, scores.humanTimeline]);

        const groups = [
          { key: "Technical Fit", avg: techAvg, weightId: "tfWeightTechnicalFit" },
          { key: "Environment", avg: envAvg, weightId: "tfWeightEnvironment" },
          { key: "Compliance", avg: compAvg, weightId: "tfWeightCompliance" },
          { key: "Human", avg: humanAvg, weightId: "tfWeightHuman" },
        ];

        if (groups.some(g => g.avg === null)) {
          alert("ëª¨ë“  Technical Fit í•­ëª©ì— ì ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
          return null;
        }

        let score01 = 0;
        groups.forEach(g => {
          const w = parseFloat(document.getElementById(g.weightId).value) || 0;
          score01 += (g.avg / 5) * w;
        });
        const techScore = Math.round(score01 * 100);

        let riskLevel = "";
        if (techScore >= 80) riskLevel = "Low Risk";
        else if (techScore >= 60) riskLevel = "Moderate Risk";
        else if (techScore >= 40) riskLevel = "High Risk";
        else riskLevel = "Critical Risk";

        techFitRiskList.innerHTML = "";
        const riskConfig = [
          { key: "tfFunctional", label: "Technical Fit Â· ê¸°ëŠ¥ ì í•©ì„±" },
          { key: "tfCustomization", label: "Technical Fit Â· ì»¤ìŠ¤í„°ë§ˆì´ì§• í•„ìš”ë„" },
          { key: "tfLegacy", label: "Technical Fit Â· ë ˆê±°ì‹œ ì œì•½" },
          { key: "envInfra", label: "Environment Â· ì¸í”„ë¼ í˜¸í™˜ì„±" },
          { key: "envIntegration", label: "Environment Â· ì—°ë™ ì§€ì› ì—¬ë¶€" },
          { key: "envNetwork", label: "Environment Â· í™˜ê²½/ë„¤íŠ¸ì›Œí¬ ì œì•½" },
          { key: "compSecurity", label: "Compliance Â· ë³´ì•ˆ ê²€í†  ë‚œì´ë„" },
          { key: "compRegulatory", label: "Compliance Â· ê·œì œ ì¤€ìˆ˜ ê°€ëŠ¥ì„±" },
          { key: "compData", label: "Compliance Â· ë°ì´í„°/ë³´ì•ˆ ì í•©ì„±" },
          { key: "humanTeam", label: "Human Â· ê³ ê° ê¸°ìˆ íŒ€ ì¤€ë¹„ë„" },
          { key: "humanSupport", label: "Human Â· ë„ì… ì§€ì› ë¦¬ì†ŒìŠ¤" },
          { key: "humanTimeline", label: "Human Â· ì¼ì •/ë²”ìœ„ í˜„ì‹¤ì„±" },
        ];
        riskConfig.forEach(r => {
          const v = scores[r.key];
          if (v !== null && v <= 2) {
            const li = document.createElement("li");
            li.textContent = r.label + " (ì ìˆ˜ " + v + ")";
            techFitRiskList.appendChild(li);
          }
        });
        if (!techFitRiskList.children.length) {
          const li = document.createElement("li");
          li.textContent = "2ì  ì´í•˜ Risk í•­ëª© ì—†ìŒ.";
          techFitRiskList.appendChild(li);
        }

        techScoreValue.textContent = techScore + " / 100";
        techRiskValue.textContent = riskLevel;
        techFitResultArea.style.display = "";

        currentDeal.techScore = techScore;
        currentDeal.techRisk = riskLevel;

        // Dashboard ì—…ë°ì´íŠ¸ ë° í‘œì‹œ
        updateDashboard();
        dashboardSection.style.display = "";
        dashboardSection.scrollIntoView({ behavior: "smooth", block: "start" });

        // ì €ì¥
        saveCurrentDeal();

        return techScore;
      }

      dealWinResultButton.addEventListener("click", computeDealWinScore);
      techFitResultButton.addEventListener("click", computeTechFitScore);

      // Quadrant drawing
      function drawQuadrant(bizScore, techScore) {
        if (!quadrantCanvas || !quadrantCanvas.getContext) return;
        const rect = quadrantCanvas.getBoundingClientRect();
        const dpr = window.devicePixelRatio || 1;
        quadrantCanvas.width = rect.width * dpr;
        quadrantCanvas.height = rect.height * dpr;

        const ctx = quadrantCanvas.getContext("2d");
        ctx.setTransform(1, 0, 0, 1, 0, 0);
        ctx.scale(dpr, dpr);

        const width = rect.width;
        const height = rect.height;
        const margin = 32;

        // ë°°ê²½
        ctx.fillStyle = "#f9fafb";
        ctx.fillRect(0, 0, width, height);

        // ì¶•
        const x0 = margin;
        const y0 = height - margin;
        const xMax = width - margin;
        const yMax = margin;

        ctx.strokeStyle = "#d1d5db";
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.moveTo(x0, y0);
        ctx.lineTo(xMax, y0); // Xì¶•
        ctx.moveTo(x0, y0);
        ctx.lineTo(x0, yMax); // Yì¶•
        ctx.stroke();

        // ì¶• ë¼ë²¨
        ctx.fillStyle = "#6b7280";
        ctx.font = "11px system-ui";

        ctx.fillText("Business Fit (Deal Score)", x0 + 4, y0 + 20);
        ctx.save();
        ctx.translate(x0 - 20, y0 - 4);
        ctx.rotate(-Math.PI / 2);
        ctx.fillText("Technical Fit Score", 0, 0);
        ctx.restore();

        // ê²©ì (25, 50, 75)
        ctx.strokeStyle = "#e5e7eb";
        ctx.setLineDash([4, 4]);

        [25, 50, 75].forEach(v => {
          const x = x0 + (v / 100) * (xMax - x0);
          const y = y0 - (v / 100) * (y0 - yMax);
          // ìˆ˜ì§
          ctx.beginPath();
          ctx.moveTo(x, y0);
          ctx.lineTo(x, yMax);
          ctx.stroke();
          // ìˆ˜í‰
          ctx.beginPath();
          ctx.moveTo(x0, y);
          ctx.lineTo(xMax, y);
          ctx.stroke();
        });

        ctx.setLineDash([]);

        // ì  ì—†ìœ¼ë©´ ì¢…ë£Œ
        if (bizScore == null || techScore == null) return;

        const x = x0 + (bizScore / 100) * (xMax - x0);
        const y = y0 - (techScore / 100) * (y0 - yMax);

        ctx.fillStyle = "#4f46e5";
        ctx.strokeStyle = "rgba(79,70,229,0.4)";
        ctx.lineWidth = 6;
        ctx.beginPath();
        ctx.arc(x, y, 5, 0, Math.PI * 2);
        ctx.stroke();
        ctx.fill();
      }

      function updateDashboard() {
        const biz = currentDeal.dealScore;
        const tech = currentDeal.techScore;
        if (biz == null || tech == null) return;

        dashDealName.textContent = currentDeal.name || "-";
        dashDealDesc.textContent = currentDeal.description || "-";
        dashDealScore.textContent = biz + " / 100";
        dashWinProb.textContent = "Win Probability: " + (currentDeal.winProb || "-");
        dashTechScore.textContent = tech + " / 100";
        dashTechRisk.textContent = "Risk Level: " + (currentDeal.techRisk || "-");

        // Zone í•´ì„
        let zoneTitle = "";
        let zoneBody = "";
        let zoneActions = "";

        if (biz >= 70 && tech >= 70) {
          zoneTitle = "ìš°ìƒë‹¨ Â· Strong Opportunity";
          zoneBody = "ë¹„ì¦ˆë‹ˆìŠ¤Â·ê¸°ìˆ  Fit ëª¨ë‘ ìš°ìˆ˜í•œ ë”œì…ë‹ˆë‹¤. ë¹ ë¥´ê²Œ ì§„í–‰í•˜ë©´ì„œ ê²½ìŸì‚¬ ì°¨ë‹¨ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.";
          zoneActions = "EB ì •ë ¬ ì¡°ê¸° í™•ë³´, ë‹¨ê³„ ë¹ ë¥´ê²Œ ì§„í–‰, PoC ìµœì†Œí™” ë˜ëŠ” ìƒëµ, ê²½ìŸ ë©”ì‹œì§€ ê°•í™”, ê³„ì•½Â·ë³´ì•ˆ ì ˆì°¨ ì‹ ì† ì²˜ë¦¬.";
        } else if (biz >= 70 && tech < 70) {
          zoneTitle = "ìš°í•˜ë‹¨ Â· Biz OK but Tech Risk";
          zoneBody = "êµ¬ë§¤ ì˜ì§€ëŠ” ë†’ì§€ë§Œ ê¸°ìˆ  ë¦¬ìŠ¤í¬ê°€ ì¡´ì¬í•©ë‹ˆë‹¤. PoC ì‹¤íŒ¨ ìœ„í—˜ì„ ì¤„ì´ê¸° ìœ„í•œ ì„¤ê³„ê°€ í•„ìš”í•©ë‹ˆë‹¤.";
          zoneActions = "ê¸°ìˆ  ë¦¬ìŠ¤í¬ë¥¼ ì†”ì§í•˜ê²Œ ê³µìœ í•˜ê³ , ëŒ€ì•ˆ/ë¡œë“œë§µ ì œì‹œ, PoC ë²”ìœ„Â·ì„±ê³µ ê¸°ì¤€ì„ ëª…í™•íˆ ì •ì˜í•˜ì„¸ìš”.";
        } else if (biz < 70 && tech >= 70) {
          zoneTitle = "ì¢Œìƒë‹¨ Â· Tech OK but Biz Weak";
          zoneBody = "ê¸°ìˆ  Fitì€ ì¢‹ì§€ë§Œ ë¹„ì¦ˆë‹ˆìŠ¤ ë™ë ¥ì´ ì•½í•©ë‹ˆë‹¤. ì‚¬ìš© ì‚¬ë¡€ì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜ë¥¼ ì¬ì •ì˜í•´ì•¼ í•©ë‹ˆë‹¤.";
          zoneActions = "ë¹„ì¦ˆë‹ˆìŠ¤ ì±”í”¼ì–¸ ë°œêµ´, ì‚¬ë¡€/ROI ìŠ¤í† ë¦¬ ê°•í™”, ìƒìœ„ ì˜ì‚¬ê²°ì •ìì™€ì˜ ëŒ€í™” ê¸°íšŒë¥¼ í™•ë³´í•˜ì„¸ìš”.";
        } else {
          zoneTitle = "ì¢Œí•˜ë‹¨ Â· Weak Opportunity";
          zoneBody = "ë¹„ì¦ˆë‹ˆìŠ¤Â·ê¸°ìˆ  ì¸¡ë©´ ëª¨ë‘ì—ì„œ ë¦¬ìŠ¤í¬ê°€ í° ë”œì…ë‹ˆë‹¤. ì „ëµì  ì² ìˆ˜ ë˜ëŠ” ì¬ì •ì˜ê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
          zoneActions = "íˆ¬ì… ë¦¬ì†ŒìŠ¤ë¥¼ ìµœì†Œí™”í•˜ê³ , ì¬ì •ì˜ ê°€ëŠ¥í•œ ìš”ì¸ì´ ìˆëŠ”ì§€ ì ê²€í•œ ë’¤ ê³„ì†/ì¤‘ë‹¨ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ì„¸ìš”.";
        }

        dashZoneTitle.textContent = zoneTitle;
        dashZoneBody.textContent = zoneBody;
        dashZoneActions.textContent = zoneActions;

        drawQuadrant(biz, tech);
      }

      // Admin (localStorage)
      function loadDeals() {
        try {
          const raw = localStorage.getItem("dqDeals");
          if (!raw) return [];
          const arr = JSON.parse(raw);
          if (!Array.isArray(arr)) return [];
          return arr;
        } catch (e) {
          return [];
        }
      }

      function saveDeals(list) {
        localStorage.setItem("dqDeals", JSON.stringify(list));
      }

      function saveCurrentDeal() {
        if (!currentDeal.name || currentDeal.dealScore == null || currentDeal.techScore == null) return;
        const list = loadDeals();
        const now = new Date();
        const dealObj = {
          id: Date.now(),
          name: currentDeal.name,
          description: currentDeal.description,
          dealScore: currentDeal.dealScore,
          winProb: currentDeal.winProb,
          techScore: currentDeal.techScore,
          techRisk: currentDeal.techRisk,
          createdAt: now.toISOString(),
        };
        list.unshift(dealObj);
        saveDeals(list);
        renderAdminList();
      }

      function formatDate(iso) {
        if (!iso) return "-";
        const d = new Date(iso);
        if (isNaN(d.getTime())) return "-";
        const y = d.getFullYear();
        const m = String(d.getMonth() + 1).padStart(2, "0");
        const day = String(d.getDate()).padStart(2, "0");
        const hh = String(d.getHours()).padStart(2, "0");
        const mm = String(d.getMinutes()).padStart(2, "0");
        return `${y}-${m}-${day} ${hh}:${mm}`;
      }

      function renderAdminList() {
        const deals = loadDeals();

        adminListEl.innerHTML = "";
        if (!deals.length) {
          adminListEl.appendChild(adminEmptyEl);
          adminEmptyEl.style.display = "";
          return;
        }

        adminEmptyEl.style.display = "none";

        deals.forEach(deal => {
          const row = document.createElement("div");
          row.className = "admin-row";

          const main = document.createElement("div");
          main.className = "admin-main";
          const nameEl = document.createElement("div");
          nameEl.className = "admin-name";
          nameEl.textContent = deal.name;
          const descEl = document.createElement("div");
          descEl.className = "admin-desc";
          descEl.textContent = deal.description || "-";
          main.appendChild(nameEl);
          main.appendChild(descEl);

          const meta = document.createElement("div");
          meta.className = "admin-date";
          meta.innerHTML =
            "Biz: " + (deal.dealScore ?? "-") + " / 100 Â· Tech: " +
            (deal.techScore ?? "-") + " / 100<br>" +
            "Win: " + (deal.winProb || "-") + " Â· Risk: " + (deal.techRisk || "-") + "<br>" +
            formatDate(deal.createdAt);

          const actions = document.createElement("div");
          actions.className = "admin-actions";

          const viewBtn = document.createElement("button");
          viewBtn.className = "btn-ghost";
          viewBtn.textContent = "View";
          viewBtn.addEventListener("click", () => {
            // Load into dashboard for quick review
            currentDeal = {
              name: deal.name,
              description: deal.description,
              dealScore: deal.dealScore,
              winProb: deal.winProb,
              techScore: deal.techScore,
              techRisk: deal.techRisk,
              createdAt: deal.createdAt,
            };
            updateDashboard();
            showTab("qualification");
            dashboardSection.style.display = "";
            dashboardSection.scrollIntoView({ behavior: "smooth", block: "start" });
          });

          const delBtn = document.createElement("button");
          delBtn.className = "btn-danger";
          delBtn.textContent = "ì‚­ì œ";
          delBtn.addEventListener("click", () => {
            const filtered = deals.filter(d => d.id !== deal.id);
            saveDeals(filtered);
            renderAdminList();
          });

          actions.appendChild(viewBtn);
          actions.appendChild(delBtn);

          row.appendChild(main);
          row.appendChild(meta);
          row.appendChild(actions);
          adminListEl.appendChild(row);
        });
      }

      // Reset for new deal
      function resetForNewDeal() {
        currentDeal = {
          name: "",
          description: "",
          dealScore: null,
          winProb: "",
          techScore: null,
          techRisk: "",
          createdAt: null,
        };

        dealNameInput.value = "";
        dealDescriptionInput.value = "";
        dealNameError.style.display = "none";

        document.querySelectorAll("select[data-dw-score], select[data-tf-score]").forEach(sel => {
          sel.value = "";
        });

        // weightsëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€ (ì‚¬ìš©ì ì»¤ìŠ¤í…€ ì‚´ë ¤ë‘ê¸°)
        dealWinResultArea.style.display = "none";
        techFitResultArea.style.display = "none";

        techFitSection.style.display = "none";
        dashboardSection.style.display = "none";

        dashDealName.textContent = "-";
        dashDealDesc.textContent = "-";
        dashDealScore.textContent = "-";
        dashWinProb.textContent = "Win Probability: -";
        dashTechScore.textContent = "-";
        dashTechRisk.textContent = "Risk Level: -";
        dashZoneTitle.textContent = "-";
        dashZoneBody.textContent = "Deal ë° Technical ì ìˆ˜ë¥¼ ê³„ì‚°í•˜ë©´, ì—¬ê¸°ì— ìœ„ì¹˜ì™€ í•´ì„ì´ í‘œì‹œë©ë‹ˆë‹¤.";
        dashZoneActions.textContent = "Recommended actions will appear here.";

        drawQuadrant(null, null);
      }

      // ì´ˆê¸° ë Œë”
      showTab("qualification");
      renderAdminList();
      drawQuadrant(null, null);
    });
  </script>
</body>
</html>
